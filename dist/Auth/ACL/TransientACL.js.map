{"version":3,"sources":["Auth/ACL/TransientACL.ts"],"names":[],"mappings":"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","file":"TransientACL.js","sourcesContent":["import { ModelDecorator } from \"../../core/ModelDecorator\";\nimport { TransientDocument } from \"../../Document\";\nimport { Pointer } from \"../../Pointer\";\nimport * as Utils from \"../../Utils\";\nimport { CS } from \"../../Vocabularies\";\nimport { TransientACE } from \"../ACE\";\n\n\nexport interface TransientACL extends TransientDocument {\n\taccessTo:Pointer;\n\tentries?:TransientACE[];\n\tinheritableEntries?:TransientACE[];\n\n\t_parsePointer( element:string | Pointer ):Pointer;\n\n\tgrant( subject:string | Pointer, subjectsClass:string | Pointer, permission:string | Pointer ):void;\n\n\tgrant( subject:string | Pointer, subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\n\n\tgrant( subjects:(string | Pointer)[], subjectsClass:string | Pointer, permission:string | Pointer ):void;\n\n\tgrant( subjects:(string | Pointer)[], subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\n\n\tdeny( subject:string | Pointer, subjectsClass:string | Pointer, permission:string | Pointer ):void;\n\n\tdeny( subject:string | Pointer, subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\n\n\tdeny( subjects:(string | Pointer)[], subjectsClass:string | Pointer, permission:string | Pointer ):void;\n\n\tdeny( subjects:(string | Pointer)[], subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\n\n\tconfigureChildInheritance( granting:boolean, subject:string | Pointer, subjectsClass:string | Pointer, permission:string | Pointer ):void;\n\n\tconfigureChildInheritance( granting:boolean, subject:string | Pointer, subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\n\n\tconfigureChildInheritance( granting:boolean, subjects:(string | Pointer)[], subjectsClass:string | Pointer, permission:string | Pointer ):void;\n\n\tconfigureChildInheritance( granting:boolean, subjects:(string | Pointer)[], subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\n\n\tgrants( subject:string | Pointer, permission:string | Pointer ):boolean;\n\n\tdenies( subject:string | Pointer, permission:string | Pointer ):boolean;\n\n\tgetChildInheritance( subject:string | Pointer, permissions:string | Pointer ):boolean;\n\n\tremove( subject:string | Pointer, permission:string | Pointer ):void;\n\n\tremove( subject:string | Pointer, permissions:(string | Pointer)[] ):void;\n\n\tremoveChildInheritance( subject:string | Pointer, permission:string | Pointer ):void;\n\n\tremoveChildInheritance( subject:string | Pointer, permissions:(string | Pointer)[] ):void;\n}\n\n\nexport interface TransientACLFactory extends ModelDecorator<TransientACL> {\n\tTYPE:CS[ \"AccessControlList\" ];\n\n\tisDecorated( object:object ):object is TransientACL;\n\n\n\tdecorate<T extends object>( object:T ):T & TransientACL;\n}\n\n\nexport const TransientACL:TransientACLFactory = {\n\tTYPE: CS.AccessControlList,\n\n\n\tisDecorated( object:object ):object is TransientACL {\n\t\treturn Utils.hasPropertyDefined( object, \"accessTo\" )\n\t\t\t&& Utils.hasFunction( object, \"_parsePointer\" )\n\t\t\t&& Utils.hasFunction( object, \"grant\" )\n\t\t\t&& Utils.hasFunction( object, \"deny\" )\n\t\t\t&& Utils.hasFunction( object, \"configureChildInheritance\" )\n\t\t\t&& Utils.hasFunction( object, \"grants\" )\n\t\t\t&& Utils.hasFunction( object, \"denies\" )\n\t\t\t&& Utils.hasFunction( object, \"getChildInheritance\" )\n\t\t\t&& Utils.hasFunction( object, \"remove\" )\n\t\t\t&& Utils.hasFunction( object, \"removeChildInheritance\" );\n\t},\n\n\tdecorate<T extends object>( object:T ):T & TransientACL {\n\t\tif( TransientACL.isDecorated( object ) ) return object;\n\n\t\tTransientDocument.decorate( object );\n\n\t\tconst acl:T & TransientACL = object as T & TransientACL;\n\t\tObject.defineProperties( acl, {\n\t\t\t\"_parsePointer\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: parsePointer,\n\t\t\t},\n\t\t\t\"grant\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: grant,\n\t\t\t},\n\t\t\t\"deny\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: deny,\n\t\t\t},\n\t\t\t\"configureChildInheritance\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: configureChildInheritance,\n\t\t\t},\n\t\t\t\"grants\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: grants,\n\t\t\t},\n\t\t\t\"denies\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: denies,\n\t\t\t},\n\t\t\t\"getChildInheritance\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: getChildInheritance,\n\t\t\t},\n\t\t\t\"remove\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: remove,\n\t\t\t},\n\t\t\t\"removeChildInheritance\": {\n\t\t\t\twritable: true,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: removeChildInheritance,\n\t\t\t},\n\t\t} );\n\n\t\treturn acl;\n\t},\n\n};\n\nfunction parsePointer( element:string | Pointer ):Pointer {\n\treturn Pointer.is( element ) ? element : Pointer.create( { id: element } );\n}\n\nfunction parsePointers( elements:string | Pointer | (string | Pointer)[] ):Pointer[] {\n\tlet elementsArray:(string | Pointer)[] = Utils.isArray( elements ) ? <(string | Pointer)[]> elements : [ <string | Pointer> elements ];\n\treturn elementsArray.map( ( element:string | Pointer ) => (this as TransientACL)._parsePointer( element ) );\n}\n\nfunction configACE( this:TransientACL, granting:boolean, subject:Pointer, subjectsClass:Pointer, permissions:Pointer[], aces:TransientACE[] ):TransientACE {\n\tlet subjectACEs:TransientACE[] = aces.filter( _ => _.subjects.length === 1 && _.granting === granting && Pointer.areEqual( _.subjects[ 0 ], subject ) );\n\n\tlet ace:TransientACE;\n\tif( subjectACEs.length === 0 ) {\n\t\tace = TransientACE.createFrom( {\n\t\t\tgranting,\n\t\t\tpermissions: [],\n\t\t\tsubjects: [ subject ],\n\t\t\tsubjectsClass,\n\t\t} );\n\n\t\taces.push( this.createFragment( ace ) );\n\t} else {\n\t\tace = subjectACEs[ 0 ];\n\t}\n\n\tArray.prototype.push.apply( ace.permissions, permissions );\n\treturn ace;\n}\n\nfunction configACEs( granting:boolean, subjects:string | Pointer | (string | Pointer)[], subjectsClass:string | Pointer, permissions:string | Pointer | (string | Pointer)[], aces:TransientACE[] ):void {\n\tlet subjectPointers:Pointer[] = parsePointers.call( this, subjects );\n\tlet subjectClassPointer:Pointer = (this as TransientACL)._parsePointer( subjectsClass );\n\tlet permissionPointers:Pointer[] = parsePointers.call( this, permissions );\n\n\tfor( let subject of subjectPointers ) {\n\t\tremovePermissionsFrom.call( this, subject, permissionPointers, aces );\n\t\tconfigACE.call( this, granting, subject, subjectClassPointer, permissionPointers, aces );\n\t}\n}\n\nfunction grant( subject:string | Pointer, subjectsClass:string | Pointer, permission:string | Pointer ):void;\nfunction grant( subject:string | Pointer, subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\nfunction grant( subjects:(string | Pointer)[], subjectsClass:string | Pointer, permission:string | Pointer ):void;\nfunction grant( subjects:(string | Pointer)[], subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\nfunction grant( subjects:string | Pointer | (string | Pointer)[], subjectsClass:string | Pointer, permissions:string | Pointer | (string | Pointer)[] ):void {\n\tlet acl:TransientACL = this;\n\tacl.entries = acl.entries || [];\n\tconfigACEs.call( this, true, subjects, subjectsClass, permissions, acl.entries );\n}\n\nfunction deny( subject:string | Pointer, subjectsClass:string | Pointer, permission:string | Pointer ):void;\nfunction deny( subject:string | Pointer, subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\nfunction deny( subjects:(string | Pointer)[], subjectsClass:string | Pointer, permission:string | Pointer ):void;\nfunction deny( subjects:(string | Pointer)[], subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\nfunction deny( subjects:string | Pointer | (string | Pointer)[], subjectsClass:string | Pointer, permissions:string | Pointer | (string | Pointer)[] ):void {\n\tlet acl:TransientACL = this;\n\tacl.entries = acl.entries || [];\n\tconfigACEs.call( this, false, subjects, subjectsClass, permissions, acl.entries );\n}\n\nfunction configureChildInheritance( granting:boolean, subject:string | Pointer, subjectsClass:string | Pointer, permission:string | Pointer ):void;\nfunction configureChildInheritance( granting:boolean, subject:string | Pointer, subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\nfunction configureChildInheritance( granting:boolean, subjects:(string | Pointer)[], subjectsClass:string | Pointer, permission:string | Pointer ):void;\nfunction configureChildInheritance( granting:boolean, subjects:(string | Pointer)[], subjectsClass:string | Pointer, permissions:(string | Pointer)[] ):void;\nfunction configureChildInheritance( granting:boolean, subjects:string | Pointer | (string | Pointer)[], subjectsClass:string | Pointer, permissions:string | Pointer | (string | Pointer)[] ):void {\n\tlet acl:TransientACL = this;\n\tacl.inheritableEntries = acl.inheritableEntries || [];\n\tconfigACEs.call( this, granting, subjects, subjectsClass, permissions, acl.inheritableEntries );\n}\n\nfunction grantingFrom( subject:Pointer, permission:Pointer, aces:TransientACE[] ):boolean {\n\tlet subjectACEs:TransientACE[] = aces.filter( ace => Utils.ArrayUtils.indexOf( ace.subjects, subject, Pointer.areEqual ) !== - 1 );\n\n\tfor( let ace of subjectACEs ) {\n\t\tif( Utils.ArrayUtils.indexOf( ace.permissions, permission, Pointer.areEqual ) !== - 1 )\n\t\t\treturn ace.granting;\n\t}\n\treturn null;\n}\n\nfunction getGranting( subject:string | Pointer, permission:string | Pointer, aces:TransientACE[] ):boolean {\n\tif( ! aces ) return null;\n\n\tlet subjectPointer:Pointer = (this as TransientACL)._parsePointer( subject );\n\tlet permissionPointer:Pointer = (this as TransientACL)._parsePointer( permission );\n\n\treturn grantingFrom( subjectPointer, permissionPointer, aces );\n}\n\nfunction grants( subject:string | Pointer, permission:string | Pointer ):boolean {\n\tlet acl:TransientACL = this;\n\treturn getGranting.call( this, subject, permission, acl.entries );\n}\n\nfunction denies( subject:string | Pointer, permission:string | Pointer ):boolean {\n\tlet acl:TransientACL = this;\n\tlet granting:boolean = getGranting.call( this, subject, permission, acl.entries );\n\treturn granting === null ? null : ! granting;\n}\n\nfunction getChildInheritance( subject:string | Pointer, permission:string | Pointer ):boolean {\n\tlet acl:TransientACL = this;\n\treturn getGranting.call( this, subject, permission, acl.inheritableEntries );\n}\n\nfunction removePermissionsFrom( subject:Pointer, permissions:Pointer[], aces:TransientACE[] ):void {\n\tif( ! aces ) return;\n\n\tlet acl:TransientACL = <TransientACL> this;\n\tlet opposedAces:TransientACE[] = acl.entries === aces ? acl.inheritableEntries : acl.entries;\n\n\tlet subjectACEs:TransientACE[] = aces.filter( ace => Utils.ArrayUtils.indexOf( ace.subjects, subject, Pointer.areEqual ) !== - 1 );\n\tfor( let ace of subjectACEs ) {\n\t\tif( opposedAces && Utils.ArrayUtils.indexOf( opposedAces, ace, Pointer.areEqual ) !== - 1 ) {\n\t\t\taces.splice( Utils.ArrayUtils.indexOf( aces, ace, Pointer.areEqual ), 1 );\n\n\t\t\tlet newACE:TransientACE = configACE.call( this, ace.granting, subject, ace.subjectsClass, ace.permissions, aces );\n\t\t\tsubjectACEs.push( newACE );\n\t\t\tcontinue;\n\t\t}\n\n\t\tif( ace.subjects.length > 1 ) {\n\t\t\tace.subjects.splice( Utils.ArrayUtils.indexOf( ace.subjects, subject, Pointer.areEqual ), 1 );\n\n\t\t\tlet newACE:TransientACE = configACE.call( this, ace.granting, subject, ace.subjectsClass, ace.permissions, aces );\n\t\t\tsubjectACEs.push( newACE );\n\t\t\tcontinue;\n\t\t}\n\n\t\tfor( let permission of permissions ) {\n\t\t\tlet index:number = Utils.ArrayUtils.indexOf( ace.permissions, permission, Pointer.areEqual );\n\n\t\t\tif( index === - 1 ) continue;\n\t\t\tace.permissions.splice( index, 1 );\n\t\t}\n\n\t\tif( ace.permissions.length === 0 ) {\n\t\t\taces.splice( Utils.ArrayUtils.indexOf( aces, ace, Pointer.areEqual ), 1 );\n\t\t\tacl._removeFragment( ace );\n\t\t}\n\t}\n}\n\nfunction removePermissions( subject:string | Pointer, permissions:string | Pointer | (string | Pointer)[], aces:TransientACE[] ):void {\n\tlet subjectPointer:Pointer = (this as TransientACL)._parsePointer( subject );\n\tlet permissionPointers:Pointer[] = parsePointers.call( this, permissions );\n\tremovePermissionsFrom.call( this, subjectPointer, permissionPointers, aces );\n}\n\nfunction remove( subject:string | Pointer, permission:string | Pointer ):void;\nfunction remove( subject:string | Pointer, permissions:(string | Pointer)[] ):void;\nfunction remove( subject:string | Pointer, permissions:string | Pointer | (string | Pointer)[] ):void {\n\tlet acl:TransientACL = this;\n\tremovePermissions.call( this, subject, permissions, acl.entries );\n}\n\nfunction removeChildInheritance( subject:string | Pointer, permission:string | Pointer ):void;\nfunction removeChildInheritance( subject:string | Pointer, permissions:(string | Pointer)[] ):void;\nfunction removeChildInheritance( subject:string | Pointer, permissions:string | Pointer | (string | Pointer)[] ):void {\n\tlet acl:TransientACL = this;\n\tremovePermissions.call( this, subject, permissions, acl.inheritableEntries );\n}\n"]}