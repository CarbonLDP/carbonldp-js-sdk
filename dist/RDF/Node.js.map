{"version":3,"sources":["RDF/Node.ts"],"names":[],"mappings":"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","file":"Node.js","sourcesContent":["import { PointerLibrary } from \"../Pointer\";\nimport { XSD } from \"../Vocabularies/XSD\";\nimport * as Utils from \"./../Utils\";\nimport { RDFDocument } from \"./Document\";\nimport { RDFList } from \"./List\";\nimport { RDFLiteral } from \"./Literal\";\nimport { URI } from \"./URI\";\nimport { RDFValue } from \"./Value\";\n\nexport type RDFNodePropertyValue = string | RDFNode | RDFList | RDFValue | RDFLiteral;\n\nexport interface RDFNode {\n\t\"@id\":string;\n\t\"@type\"?:string[];\n\n\t[propertyURI:string]:string | RDFNodePropertyValue[];\n}\n\n\nexport interface RDFNodeFactory {\n\tis( value:any ):value is RDFNode;\n\n\tcreate( uri:string ):RDFNode;\n\n\n\tgetID( node:RDFNode ):string;\n\n\tgetRelativeID( node:RDFNode ):string;\n\n\tareEqual( node1:RDFNode, node2:RDFNode ):boolean;\n\n\tisFragment( node:RDFNode ):boolean;\n\n\thasType( node:RDFNode, type:string ):boolean;\n\n\tgetTypes( node:RDFNode ):string[];\n\n\tgetFreeNodes( objects:object | object[] ):RDFNode[];\n\n\tgetList( propertyValues:RDFNodePropertyValue[] ):RDFList | undefined;\n\n\tgetProperties( propertyValues:RDFNodePropertyValue[], pointerLibrary:PointerLibrary ):any[] | undefined;\n\n\tgetPropertyPointers( propertyValues:RDFNodePropertyValue[], pointerLibrary:PointerLibrary ):any[] | undefined;\n\n\tgetPropertyLiterals( propertyValues:RDFNodePropertyValue[], literalType:string ):any[] | undefined;\n\n\tgetPropertyLanguageMap( propertyValues:RDFNodePropertyValue[] ):object | undefined;\n}\n\nexport const RDFNode:RDFNodeFactory = {\n\tis( value:any ):value is RDFNode {\n\t\treturn Utils.hasProperty( value, \"@id\" )\n\t\t\t&& Utils.isString( value[ \"@id\" ] );\n\t},\n\n\tcreate( uri:string ):RDFNode {\n\t\treturn {\n\t\t\t\"@id\": uri,\n\t\t};\n\t},\n\n\n\tgetID( node:RDFNode ):string {\n\t\treturn node[ \"@id\" ];\n\t},\n\n\tgetRelativeID( node:RDFNode ):string {\n\t\tconst id:string = RDFNode.getID( node );\n\t\treturn URI.hasFragment( id ) ? URI.getFragment( id ) : id;\n\t},\n\n\tareEqual( node1:RDFNode, node2:RDFNode ):boolean {\n\t\treturn RDFNode.getID( node1 ) === RDFNode.getID( node2 );\n\t},\n\n\tisFragment( node:RDFNode ):boolean {\n\t\tconst id:string = RDFNode.getID( node );\n\t\treturn URI.hasFragment( id ) || URI.isBNodeID( id );\n\t},\n\n\thasType( node:RDFNode, type:string ):boolean {\n\t\treturn RDFNode.getTypes( node ).indexOf( type ) !== - 1;\n\t},\n\n\tgetTypes( node:RDFNode ):string[] {\n\t\tif( ! ( \"@type\" in node ) ) return [];\n\t\treturn node[ \"@type\" ];\n\t},\n\n\tgetFreeNodes( objects:object | object[] ):RDFNode[] {\n\t\tif( ! Array.isArray( objects ) ) return [];\n\n\t\treturn objects\n\t\t\t.filter( element => ! RDFDocument.is( element ) )\n\t\t\t.filter( RDFNode.is );\n\t},\n\n\tgetList( propertyValues:RDFNodePropertyValue[] ):RDFList | undefined {\n\t\tif( ! Array.isArray( propertyValues ) ) return;\n\n\t\treturn propertyValues\n\t\t\t.find( RDFList.is )\n\t\t\t;\n\t},\n\n\tgetProperties( propertyValues:RDFNodePropertyValue[], pointerLibrary:PointerLibrary ):any[] | undefined {\n\t\tif( ! Array.isArray( propertyValues ) ) return;\n\n\t\treturn propertyValues\n\t\t\t.map( RDFValue.parse.bind( null, pointerLibrary ) )\n\t\t\t.filter( value => ! Utils.isNull( value ) )\n\t\t\t;\n\t},\n\n\tgetPropertyPointers( propertyValues:RDFNodePropertyValue[], pointerLibrary:PointerLibrary ):any[] | undefined {\n\t\tif( ! Array.isArray( propertyValues ) ) return;\n\n\t\treturn propertyValues\n\t\t\t.filter( RDFNode.is )\n\t\t\t.map( RDFNode.getID )\n\t\t\t.map( pointerLibrary.getPointer, pointerLibrary )\n\t\t\t.filter( pointer => ! Utils.isNull( pointer ) )\n\t\t\t;\n\t},\n\n\tgetPropertyLiterals( propertyValues:RDFNodePropertyValue[], literalType:string ):any[] | undefined {\n\t\tif( ! Array.isArray( propertyValues ) ) return;\n\n\t\treturn propertyValues\n\t\t\t.filter( RDFLiteral.is )\n\t\t\t.filter( literal => RDFLiteral.hasType( literal, literalType ) )\n\t\t\t.map( RDFLiteral.parse )\n\t\t\t;\n\t},\n\n\tgetPropertyLanguageMap( propertyValues:RDFNodePropertyValue[] ):object | undefined {\n\t\tif( ! Array.isArray( propertyValues ) ) return;\n\n\t\tconst propertyLanguageMap:object = {};\n\t\tfor( const propertyValue of propertyValues ) {\n\t\t\tif( ! RDFLiteral.is( propertyValue ) ) continue;\n\t\t\tif( ! RDFLiteral.hasType( propertyValue, XSD.string ) ) continue;\n\n\t\t\tconst languageTag:string = propertyValue[ \"@language\" ];\n\t\t\tif( ! languageTag ) continue;\n\n\t\t\tpropertyLanguageMap[ languageTag ] = RDFLiteral.parse( propertyValue );\n\t\t}\n\n\t\treturn propertyLanguageMap;\n\t},\n\n};\n"]}