{"version":3,"sources":["Documents.ts"],"names":[],"mappings":"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","file":"Documents.js","sourcesContent":["import { QueryClause } from \"sparqler/clauses\";\nimport {\n\tBindToken,\n\tConstructToken,\n\tIRIToken,\n\tOptionalToken,\n\tPatternToken,\n\tPredicateToken,\n\tQueryToken,\n\tSelectToken,\n\tSubjectToken,\n\tValuesToken,\n\tVariableToken,\n} from \"sparqler/tokens\";\n\nimport {\n\tAccessPoint,\n\tBaseAccessPoint,\n\tTransientAccessPoint\n} from \"./AccessPoint\";\nimport * as Auth from \"./Auth\";\nimport { ACL } from \"./Auth/ACL\";\nimport { User } from \"./Auth/User\";\nimport { BlankNode } from \"./BlankNode\";\nimport { CarbonLDP } from \"./CarbonLDP\";\nimport { Context } from \"./Context\";\nimport {\n\tDocument,\n\tTransientDocument\n} from \"./Document\";\nimport * as Errors from \"./Errors\";\nimport { Fragment } from \"./Fragment\";\nimport { FreeResources } from \"./FreeResources\";\nimport { statusCodeMap } from \"./HTTP/Errors\";\nimport { HTTPError } from \"./HTTP/Errors/HTTPError\";\nimport { BadResponseError } from \"./HTTP/Errors/ServerErrors/BadResponseError\";\nimport { UnknownError } from \"./HTTP/Errors/UnknownError\";\nimport { Header } from \"./HTTP/Header\";\nimport { HTTPMethod } from \"./HTTP/HTTPMethod\";\nimport { Parser } from \"./HTTP/Parser\";\nimport {\n\tGETOptions,\n\tRequestOptions,\n\tRequestService,\n\tRequestUtils,\n\tRetrievalPreferences,\n} from \"./HTTP/Request\";\nimport { Response } from \"./HTTP/Response\";\nimport { JSONLDCompacter } from \"./JSONLD/Compacter\";\nimport { JSONLDConverter } from \"./JSONLD/Converter\";\nimport { JSONLDParser } from \"./JSONLD/Parser\";\nimport { AccessPointsMetadata } from \"./LDP\";\nimport { AddMemberAction } from \"./LDP/AddMemberAction\";\nimport { DocumentMetadata } from \"./LDP/DocumentMetadata\";\nimport { ErrorResponse } from \"./LDP/ErrorResponse\";\nimport { RemoveMemberAction } from \"./LDP/RemoveMemberAction\";\nimport { ResponseMetadata } from \"./LDP/ResponseMetadata\";\nimport { DeltaCreator } from \"./LDPatch/DeltaCreator\";\nimport { AccessPointCreated } from \"./Messaging/AccessPointCreated\";\nimport { ChildCreated } from \"./Messaging/ChildCreated\";\nimport { DocumentCreated } from \"./Messaging/DocumentCreated\";\nimport { DocumentDeleted } from \"./Messaging/DocumentDeleted\";\nimport { DocumentModified } from \"./Messaging/DocumentModified\";\nimport { Event } from \"./Messaging/Event\";\nimport { EventMessage } from \"./Messaging/EventMessage\";\nimport { MemberAdded } from \"./Messaging/MemberAdded\";\nimport { MemberRemoved } from \"./Messaging/MemberRemoved\";\nimport {\n\tcreateDestination,\n\tvalidateEventContext,\n} from \"./Messaging/Utils\";\nimport {\n\tDigestedObjectSchema,\n\tObjectSchemaDigester,\n\tObjectSchemaResolver,\n\tObjectSchemaUtils,\n} from \"./ObjectSchema\";\nimport {\n\tPointer,\n\tPointerLibrary,\n\tPointerValidator,\n} from \"./Pointer\";\nimport { ProtectedDocument } from \"./ProtectedDocument\";\nimport {\n\tRDFDocument,\n\tRDFDocumentParser,\n} from \"./RDF/Document\";\nimport { RDFNode } from \"./RDF/Node\";\nimport { URI } from \"./RDF/URI\";\nimport {\n\tResource,\n\tTransientResource\n} from \"./Resource\";\nimport {\n\tFinishSPARQLSelect,\n\tSPARQLBuilder,\n} from \"./SPARQL/Builder\";\nimport { QueryContext } from \"./SPARQL/QueryDocument\";\nimport { PartialMetadata } from \"./SPARQL/QueryDocument/PartialMetadata\";\nimport { QueryContextBuilder } from \"./SPARQL/QueryDocument/QueryContextBuilder\";\nimport { QueryContextPartial } from \"./SPARQL/QueryDocument/QueryContextPartial\";\nimport { QueryDocumentBuilder } from \"./SPARQL/QueryDocument/QueryDocumentBuilder\";\nimport { QueryDocumentsBuilder } from \"./SPARQL/QueryDocument/QueryDocumentsBuilder\";\nimport { QueryMetadata } from \"./SPARQL/QueryDocument/QueryMetadata\";\nimport {\n\tQueryProperty,\n\tQueryPropertyType,\n} from \"./SPARQL/QueryDocument/QueryProperty\";\nimport {\n\tareDifferentType,\n\tcreateAllPattern,\n\tcreatePropertyPatterns,\n\tcreateTypesPattern,\n\tgetAllTriples,\n\tgetPathProperty,\n\tgetResourcesVariables,\n} from \"./SPARQL/QueryDocument/Utils\";\nimport { SPARQLRawResults } from \"./SPARQL/RawResults\";\nimport { SPARQLSelectResults } from \"./SPARQL/SelectResults\";\nimport { SPARQLService } from \"./SPARQL/Service\";\nimport * as Utils from \"./Utils\";\nimport { promiseMethod } from \"./Utils\";\nimport { C } from \"./Vocabularies/C\";\nimport { LDP } from \"./Vocabularies/LDP\";\n\nexport class Documents implements PointerLibrary, PointerValidator, ObjectSchemaResolver {\n\n\tprivate _jsonldConverter:JSONLDConverter;\n\tget jsonldConverter():JSONLDConverter { return this._jsonldConverter; }\n\n\tprivate _documentDecorators:Map<string, ( object:object, documents?:Documents ) => object>;\n\tget documentDecorators():Map<string, ( object:object, documents?:Documents ) => object> { return this._documentDecorators; }\n\n\tprivate context:Context;\n\tprivate pointers:Map<string, Pointer>;\n\n\t// Tracks the documents that are being resolved to avoid triggering repeated requests\n\tprivate documentsBeingResolved:Map<string, Promise<Document>>;\n\n\tconstructor( context?:Context ) {\n\t\tthis.context = context;\n\n\t\tthis.pointers = new Map<string, Pointer>();\n\t\tthis.documentsBeingResolved = new Map<string, Promise<Document>>();\n\n\t\tif( ! ! this.context && ! ! this.context.parentContext ) {\n\t\t\tlet contextJSONLDConverter:JSONLDConverter = this.context.parentContext.documents.jsonldConverter;\n\t\t\tthis._jsonldConverter = new JSONLDConverter( contextJSONLDConverter.literalSerializers );\n\t\t} else {\n\t\t\tthis._jsonldConverter = new JSONLDConverter();\n\t\t}\n\n\t\tlet decorators:Documents[ \"documentDecorators\" ] = new Map();\n\t\tif( this.context && this.context.parentContext ) {\n\t\t\tlet parentDecorators:Documents[ \"documentDecorators\" ] = this.context.parentContext.documents.documentDecorators;\n\t\t\tif( parentDecorators ) decorators = this._documentDecorators = Utils.MapUtils.extend( decorators, parentDecorators );\n\t\t} else {\n\t\t\tdecorators\n\t\t\t\t.set( ProtectedDocument.TYPE, ProtectedDocument.decorate )\n\t\t\t\t.set( User.TYPE, User.decorate )\n\t\t\t\t.set( ACL.TYPE, ACL.decorate )\n\t\t\t\t.set( Auth.Role.RDF_CLASS, Auth.PersistedRole.Factory.decorate )\n\t\t\t;\n\t\t}\n\n\t\tthis._documentDecorators = decorators;\n\t}\n\n\tinScope( pointer:Pointer ):boolean;\n\tinScope( id:string ):boolean;\n\tinScope( idOrPointer:any ):boolean {\n\t\tlet id:string = Pointer.is( idOrPointer ) ? idOrPointer.id : idOrPointer;\n\n\t\tif( URI.isBNodeID( id ) ) return false;\n\n\t\tif( ! ! this.context ) {\n\t\t\tid = ObjectSchemaUtils.resolveURI( id, this.context.getObjectSchema() );\n\n\t\t\tif( URI.isRelative( id ) ) return true;\n\t\t\tif( URI.isBaseOf( this.context.baseURI, id ) ) return true;\n\t\t} else {\n\t\t\tif( URI.isAbsolute( id ) ) return true;\n\t\t}\n\n\t\tif( ! ! this.context && ! ! this.context.parentContext ) return this.context.parentContext.documents.inScope( id );\n\n\t\treturn URI.isRelative( id );\n\t}\n\n\thasPointer( id:string ):boolean {\n\t\tid = this._getPointerID( id );\n\n\t\tif( this.pointers.has( id ) ) return true;\n\n\t\tif( ! ! this.context && ! ! this.context.parentContext ) return this.context.parentContext.documents.hasPointer( id );\n\n\t\treturn false;\n\t}\n\n\tgetPointer( id:string ):Pointer {\n\t\tlet localID:string = this._getPointerID( id );\n\n\t\tif( localID === null ) {\n\t\t\tif( ! ! this.context && ! ! this.context.parentContext ) return this.context.parentContext.documents.getPointer( id );\n\t\t\tthrow new Errors.IllegalArgumentError( \"The pointer id is not supported by this module.\" );\n\t\t}\n\n\t\tlet pointer:Pointer;\n\t\tif( ! this.pointers.has( localID ) ) {\n\t\t\tpointer = this._createPointer( localID );\n\t\t\tthis.pointers.set( localID, pointer );\n\t\t}\n\n\t\treturn this.pointers.get( localID );\n\t}\n\n\tremovePointer( idOrPointer:string | Pointer ):boolean {\n\t\tlet id:string = Utils.isString( idOrPointer ) ? idOrPointer : idOrPointer.id;\n\t\tlet localID:string = this._getPointerID( id );\n\n\t\tif( localID === null ) {\n\t\t\tif( ! ! this.context && ! ! this.context.parentContext ) return this.context.parentContext.documents.removePointer( id );\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.pointers.delete( localID );\n\t}\n\n\tregister<T extends object>( id:string ):T & Document {\n\t\tconst pointerID:string = this._getPointerID( id );\n\t\tif( ! pointerID ) throw new Errors.IllegalArgumentError( `Cannot register a document outside the scope of this documents instance.` );\n\n\t\tconst persistedDocument:Document =\n\t\t\tDocument.decorate( this.getPointer( pointerID ), this )\n\t\t;\n\n\t\treturn persistedDocument as T & Document;\n\t}\n\n\n\tget<T extends object>( uri:string, requestOptions?:GETOptions, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & Document>;\n\tget<T extends object>( uri:string, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & Document>;\n\tget<T extends object>( uri:string, optionsOrQueryBuilderFn:any, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & Document> {\n\t\tconst requestOptions:RequestOptions = RequestUtils.isOptions( optionsOrQueryBuilderFn ) ? optionsOrQueryBuilderFn : {};\n\t\tif( Utils.isFunction( optionsOrQueryBuilderFn ) ) queryBuilderFn = optionsOrQueryBuilderFn;\n\n\t\treturn promiseMethod( () => {\n\t\t\turi = this._getRequestURI( uri );\n\n\t\t\treturn queryBuilderFn ?\n\t\t\t\tthis._getPartialDocument( uri, requestOptions, queryBuilderFn ) :\n\t\t\t\tthis._getFullDocument( uri, requestOptions );\n\t\t} );\n\t}\n\n\texists( documentURI:string, requestOptions:RequestOptions = {} ):Promise<boolean> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\t\t\tthis._setDefaultRequestOptions( requestOptions, LDP.RDFSource );\n\n\t\t\treturn this._sendRequest( HTTPMethod.HEAD, documentURI, requestOptions );\n\t\t} ).then<boolean>( () => {\n\t\t\treturn true;\n\t\t} ).catch<boolean>( ( error:HTTPError ) => {\n\t\t\tif( error.statusCode === 404 ) return false;\n\t\t\treturn Promise.reject( error );\n\t\t} );\n\t}\n\n\tcreateChild<T extends object>( parentURI:string, childObject:T, slug?:string, requestOptions?:RequestOptions ):Promise<T & ProtectedDocument>;\n\tcreateChild<T extends object>( parentURI:string, childObject:T, requestOptions?:RequestOptions ):Promise<T & ProtectedDocument>;\n\tcreateChild<T extends object>( parentURI:string, childObject:T, slugOrRequestOptions?:any, requestOptions:RequestOptions = {} ):Promise<T & ProtectedDocument> {\n\t\tconst slug:string = Utils.isString( slugOrRequestOptions ) ? slugOrRequestOptions : null;\n\t\trequestOptions = ! Utils.isString( slugOrRequestOptions ) && ! ! slugOrRequestOptions ? slugOrRequestOptions : requestOptions;\n\n\t\treturn promiseMethod( () => {\n\t\t\tparentURI = this._getRequestURI( parentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"minimal\", requestOptions );\n\n\t\t\treturn this._persistChildDocument<T>( parentURI, childObject, slug, requestOptions );\n\t\t} );\n\t}\n\n\tcreateChildren<T extends object>( parentURI:string, childrenObjects:T[], slugs?:string[], requestOptions?:RequestOptions ):Promise<(T & ProtectedDocument)[]>;\n\tcreateChildren<T extends object>( parentURI:string, childrenObjects:T[], requestOptions?:RequestOptions ):Promise<(T & ProtectedDocument)[]>;\n\tcreateChildren<T extends object>( parentURI:string, childrenObjects:T[], slugsOrRequestOptions?:any, requestOptions:RequestOptions = {} ):Promise<(T & ProtectedDocument)[]> {\n\t\tconst slugs:string[] = Utils.isArray( slugsOrRequestOptions ) ? slugsOrRequestOptions : [];\n\t\trequestOptions = ! Utils.isArray( slugsOrRequestOptions ) && ! ! slugsOrRequestOptions ? slugsOrRequestOptions : requestOptions;\n\n\t\treturn promiseMethod( () => {\n\t\t\tparentURI = this._getRequestURI( parentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"minimal\", requestOptions );\n\n\t\t\tconst creationPromises:Promise<T & ProtectedDocument>[] = childrenObjects\n\t\t\t\t.map( ( childObject:T, index:number ) => {\n\t\t\t\t\tconst cloneOptions:RequestOptions = RequestUtils.cloneOptions( requestOptions );\n\t\t\t\t\treturn this._persistChildDocument<T>( parentURI, childObject, slugs[ index ], cloneOptions );\n\t\t\t\t} );\n\t\t\treturn Promise.all( creationPromises );\n\t\t} );\n\t}\n\n\tcreateChildAndRetrieve<T extends object>( parentURI:string, childObject:T, slug?:string, requestOptions?:RequestOptions ):Promise<T & ProtectedDocument>;\n\tcreateChildAndRetrieve<T extends object>( parentURI:string, childObject:T, requestOptions?:RequestOptions ):Promise<T & ProtectedDocument>;\n\tcreateChildAndRetrieve<T extends object>( parentURI:string, childObject:T, slugOrRequestOptions?:any, requestOptions:RequestOptions = {} ):Promise<T & ProtectedDocument> {\n\t\trequestOptions = RequestUtils.isOptions( slugOrRequestOptions ) ? slugOrRequestOptions : requestOptions;\n\t\tconst slug:string = Utils.isString( slugOrRequestOptions ) ? slugOrRequestOptions : null;\n\n\t\treturn promiseMethod( () => {\n\t\t\tparentURI = this._getRequestURI( parentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"representation\", requestOptions );\n\n\t\t\treturn this._persistChildDocument<T>( parentURI, childObject, slug, requestOptions );\n\t\t} );\n\t}\n\n\tcreateChildrenAndRetrieve<T extends object>( parentURI:string, childrenObjects:T[], slugs?:string[], requestOptions?:RequestOptions ):Promise<(T & ProtectedDocument)[]>;\n\tcreateChildrenAndRetrieve<T extends object>( parentURI:string, childrenObjects:T[], requestOptions?:RequestOptions ):Promise<(T & ProtectedDocument)[]>;\n\tcreateChildrenAndRetrieve<T extends object>( parentURI:string, childrenObjects:T[], slugsOrRequestOptions?:any, requestOptions:RequestOptions = {} ):Promise<(T & ProtectedDocument)[]> {\n\t\tconst slugs:string[] = Utils.isArray( slugsOrRequestOptions ) ? slugsOrRequestOptions : [];\n\t\trequestOptions = ! Utils.isArray( slugsOrRequestOptions ) && ! ! slugsOrRequestOptions ? slugsOrRequestOptions : requestOptions;\n\n\t\treturn promiseMethod( () => {\n\t\t\tparentURI = this._getRequestURI( parentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"representation\", requestOptions );\n\n\t\t\tconst creationPromises:Promise<T & ProtectedDocument>[] = childrenObjects\n\t\t\t\t.map( ( childObject, index ) => {\n\t\t\t\t\tconst cloneOptions:RequestOptions = RequestUtils.cloneOptions( requestOptions );\n\t\t\t\t\treturn this._persistChildDocument<T>( parentURI, childObject, slugs[ index ], cloneOptions );\n\t\t\t\t} );\n\t\t\treturn Promise.all( creationPromises );\n\t\t} );\n\t}\n\n\n\tlistChildren<T extends object>( parentURI:string, requestOptions:RequestOptions = {} ):Promise<(T & Document)[]> {\n\t\treturn this._executeChildrenBuilder( parentURI, requestOptions, emptyQueryBuildFn );\n\t}\n\n\tgetChildren<T extends object>( parentURI:string, requestOptions:RequestOptions, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<(T & Document)[]>;\n\tgetChildren<T extends object>( parentURI:string, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<(T & Document)[]>;\n\tgetChildren<T extends object>( parentURI:string, requestOptionsOrQueryBuilderFn?:any, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<(T & Document)[]> {\n\t\tconst requestOptions:RequestOptions = RequestUtils.isOptions( requestOptionsOrQueryBuilderFn ) ? requestOptionsOrQueryBuilderFn : {};\n\t\tqueryBuilderFn = Utils.isFunction( requestOptionsOrQueryBuilderFn ) ? requestOptionsOrQueryBuilderFn : queryBuilderFn;\n\n\t\tRequestUtils.setRetrievalPreferences( { include: [ C.PreferDocumentETags ] }, requestOptions );\n\n\t\treturn this._executeChildrenBuilder( parentURI, requestOptions, queryBuilderFn );\n\t}\n\n\tcreateAccessPoint<T extends object>( documentURI:string, accessPoint:T & BaseAccessPoint, slug?:string, requestOptions?:RequestOptions ):Promise<T & AccessPoint>;\n\tcreateAccessPoint<T extends object>( documentURI:string, accessPoint:T & BaseAccessPoint, requestOptions?:RequestOptions ):Promise<T & AccessPoint>;\n\tcreateAccessPoint<T extends object>( documentURI:string, accessPoint:T & BaseAccessPoint, slugOrRequestOptions:any, requestOptions:RequestOptions = {} ):Promise<T & AccessPoint> {\n\t\tconst slug:string = Utils.isString( slugOrRequestOptions ) ? slugOrRequestOptions : null;\n\t\trequestOptions = ! Utils.isString( slugOrRequestOptions ) && ! ! slugOrRequestOptions ? slugOrRequestOptions : requestOptions;\n\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"minimal\", requestOptions );\n\n\t\t\treturn this._persistAccessPoint( documentURI, accessPoint, slug, requestOptions );\n\t\t} );\n\t}\n\n\tcreateAccessPoints<T extends object>( documentURI:string, accessPoints:(T & BaseAccessPoint)[], slugs?:string[], requestOptions?:RequestOptions ):Promise<(T & AccessPoint)[]>;\n\tcreateAccessPoints<T extends object>( documentURI:string, accessPoints:(T & BaseAccessPoint)[], requestOptions?:RequestOptions ):Promise<(T & AccessPoint)[]>;\n\tcreateAccessPoints<T extends object>( documentURI:string, accessPoints:(T & BaseAccessPoint)[], slugsOrRequestOptions:any, requestOptions:RequestOptions = {} ):Promise<(T & AccessPoint)[]> {\n\t\tconst slugs:string[] = Utils.isArray( slugsOrRequestOptions ) ? slugsOrRequestOptions : [];\n\t\trequestOptions = ! Utils.isArray( slugsOrRequestOptions ) && ! ! slugsOrRequestOptions ? slugsOrRequestOptions : requestOptions;\n\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\t\t\tRequestUtils.setPreferredRetrieval( \"minimal\", requestOptions );\n\n\t\t\tconst creationPromises:Promise<T & AccessPoint>[] = accessPoints\n\t\t\t\t.map( ( accessPoint:T & BaseAccessPoint, index:number ) => {\n\t\t\t\t\tconst cloneOptions:RequestOptions = RequestUtils.cloneOptions( requestOptions );\n\t\t\t\t\treturn this._persistAccessPoint<T>( documentURI, accessPoint, slugs[ index ], cloneOptions );\n\t\t\t\t} );\n\t\t\treturn Promise.all( creationPromises );\n\t\t} );\n\t}\n\n\tlistMembers<T extends object>( uri:string, requestOptions:RequestOptions = {} ):Promise<(T & Document)[]> {\n\t\treturn this._executeMembersBuilder( uri, requestOptions, emptyQueryBuildFn );\n\t}\n\n\tgetMembers<T extends object>( uri:string, requestOptions:RequestOptions, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<(T & Document)[]>;\n\tgetMembers<T extends object>( uri:string, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<(T & Document)[]>;\n\tgetMembers<T extends object>( uri:string, requestOptionsOrQueryBuilderFn?:any, queryBuilderFn?:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder ):Promise<(T & Document)[]> {\n\t\tconst requestOptions:RequestOptions = RequestUtils.isOptions( requestOptionsOrQueryBuilderFn ) ? requestOptionsOrQueryBuilderFn : {};\n\t\tqueryBuilderFn = Utils.isFunction( requestOptionsOrQueryBuilderFn ) ? requestOptionsOrQueryBuilderFn : queryBuilderFn;\n\n\t\tRequestUtils.setRetrievalPreferences( { include: [ C.PreferDocumentETags ] }, requestOptions );\n\n\t\treturn this._executeMembersBuilder( uri, requestOptions, queryBuilderFn );\n\t}\n\n\taddMember( documentURI:string, member:Pointer, requestOptions?:RequestOptions ):Promise<void>;\n\taddMember( documentURI:string, memberURI:string, requestOptions?:RequestOptions ):Promise<void>;\n\taddMember( documentURI:string, memberORUri:Pointer | string, requestOptions:RequestOptions = {} ):Promise<void> {\n\t\treturn this.addMembers( documentURI, [ memberORUri ], requestOptions );\n\t}\n\n\taddMembers( documentURI:string, members:(Pointer | string)[], requestOptions?:RequestOptions ):Promise<void>;\n\taddMembers( documentURI:string, members:(Pointer | string)[], requestOptions:RequestOptions = {} ):Promise<void> {\n\t\treturn promiseMethod( () => {\n\t\t\tconst targetMembers:Pointer[] = this._parseMembers( members );\n\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\t\t\tthis._setDefaultRequestOptions( requestOptions, LDP.Container );\n\t\t\tRequestUtils.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\n\t\t\tconst freeResources:FreeResources = FreeResources.createFrom( { _documents: this } );\n\t\t\tfreeResources.createResourceFrom( AddMemberAction.createFrom( { targetMembers } ) );\n\n\t\t\tconst body:string = JSON.stringify( freeResources );\n\n\t\t\treturn this\n\t\t\t\t._sendRequest( HTTPMethod.PUT, documentURI, requestOptions, body )\n\t\t\t\t.then( () => {} );\n\t\t} );\n\t}\n\n\tremoveMember( documentURI:string, member:Pointer, requestOptions?:RequestOptions ):Promise<void>;\n\tremoveMember( documentURI:string, memberURI:string, requestOptions?:RequestOptions ):Promise<void>;\n\tremoveMember( documentURI:string, memberORUri:Pointer | string, requestOptions:RequestOptions = {} ):Promise<void> {\n\t\treturn this.removeMembers( documentURI, [ memberORUri ], requestOptions );\n\t}\n\n\tremoveMembers( documentURI:string, members:(Pointer | string)[], requestOptions:RequestOptions = {} ):Promise<void> {\n\t\treturn promiseMethod( () => {\n\t\t\tconst targetMembers:Pointer[] = this._parseMembers( members );\n\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\t\t\tthis._setDefaultRequestOptions( requestOptions, LDP.Container );\n\t\t\tRequestUtils.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\n\t\t\tlet containerRetrievalPreferences:RetrievalPreferences = {\n\t\t\t\tinclude: [ C.PreferSelectedMembershipTriples ],\n\t\t\t\tomit: [ C.PreferMembershipTriples ],\n\t\t\t};\n\t\t\tRequestUtils.setRetrievalPreferences( containerRetrievalPreferences, requestOptions );\n\n\t\t\tconst freeResources:FreeResources = FreeResources.createFrom( { _documents: this } );\n\t\t\tfreeResources.createResourceFrom( RemoveMemberAction.createFrom( { targetMembers } ) );\n\n\t\t\tconst body:string = JSON.stringify( freeResources );\n\n\t\t\treturn this\n\t\t\t\t._sendRequest( HTTPMethod.DELETE, documentURI, requestOptions, body )\n\t\t\t\t.then( () => {} );\n\t\t} );\n\t}\n\n\tremoveAllMembers( documentURI:string, requestOptions:RequestOptions = {} ):Promise<void> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\t\t\tthis._setDefaultRequestOptions( requestOptions, LDP.Container );\n\n\t\t\tconst containerRetrievalPreferences:RetrievalPreferences = {\n\t\t\t\tinclude: [\n\t\t\t\t\tC.PreferMembershipTriples,\n\t\t\t\t],\n\t\t\t\tomit: [\n\t\t\t\t\tC.PreferMembershipResources,\n\t\t\t\t\tC.PreferContainmentTriples,\n\t\t\t\t\tC.PreferContainmentResources,\n\t\t\t\t\tC.PreferContainer,\n\t\t\t\t],\n\t\t\t};\n\t\t\tRequestUtils.setRetrievalPreferences( containerRetrievalPreferences, requestOptions );\n\n\t\t\treturn this\n\t\t\t\t._sendRequest( HTTPMethod.DELETE, documentURI, requestOptions )\n\t\t\t\t.then( () => {} );\n\t\t} );\n\t}\n\n\n\tsave<T extends object>( persistedDocument:T & Document, requestOptions:RequestOptions = {} ):Promise<T & Document> {\n\t\treturn promiseMethod( () => {\n\t\t\tif( ! Document.is( persistedDocument ) ) throw new Errors.IllegalArgumentError( \"Provided element is not a valid persisted document.\" );\n\n\t\t\tRequestUtils.setPreferredRetrieval( \"minimal\", requestOptions );\n\t\t\treturn this._patchDocument<T>( persistedDocument, requestOptions );\n\t\t} );\n\t}\n\n\trefresh<T extends object>( persistedDocument:T & Document, requestOptions:RequestOptions = {} ):Promise<T & Document> {\n\t\treturn Utils.promiseMethod( () => {\n\t\t\tif( ! Document.is( persistedDocument ) ) throw new Errors.IllegalArgumentError( \"Provided element is not a valid persisted document.\" );\n\n\t\t\treturn persistedDocument.isPartial() ?\n\t\t\t\tthis._refreshPartialDocument<T>( persistedDocument, requestOptions ) :\n\t\t\t\tthis._refreshFullDocument<T>( persistedDocument, requestOptions );\n\t\t} );\n\t}\n\n\tsaveAndRefresh<T extends object>( persistedDocument:T & Document, requestOptions:RequestOptions = {} ):Promise<T & Document> {\n\t\treturn promiseMethod( () => {\n\t\t\tif( ! Document.is( persistedDocument ) ) throw new Errors.IllegalArgumentError( \"Provided element is not a valid persisted document.\" );\n\n\t\t\tconst cloneOptions:RequestOptions = RequestUtils.cloneOptions( requestOptions );\n\t\t\tRequestUtils.setPreferredRetrieval( persistedDocument.isPartial() ? \"minimal\" : \"representation\", cloneOptions );\n\n\t\t\treturn this._patchDocument<T>( persistedDocument, cloneOptions );\n\t\t} ).then<T & Document>( () => {\n\t\t\tif( ! persistedDocument.isPartial() ) return persistedDocument;\n\n\t\t\treturn this._refreshPartialDocument<T>( persistedDocument, requestOptions );\n\t\t} );\n\t}\n\n\n\tdelete( documentURI:string, requestOptions:RequestOptions = {} ):Promise<void> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\t\t\tthis._setDefaultRequestOptions( requestOptions, LDP.RDFSource );\n\n\t\t\treturn this._sendRequest( HTTPMethod.DELETE, documentURI, requestOptions );\n\t\t} ).then( () => {\n\t\t\tconst pointerID:string = this._getPointerID( documentURI );\n\t\t\tthis.pointers.delete( pointerID );\n\t\t} );\n\t}\n\n\n\tgetGeneralSchema():DigestedObjectSchema {\n\t\tif( ! this.context ) return new DigestedObjectSchema();\n\t\treturn this.context.getObjectSchema();\n\t}\n\n\thasSchemaFor( object:object, path?:string ):boolean {\n\t\tif( path !== void 0 ) return false;\n\t\treturn \"@id\" in object || \"id\" in object;\n\t}\n\n\tgetSchemaFor( object:object ):DigestedObjectSchema {\n\t\treturn (\"@id\" in object) ?\n\t\t\tthis._getDigestedObjectSchemaForExpandedObject( object ) :\n\t\t\tthis._getDigestedObjectSchemaForDocument( <any> object );\n\t}\n\n\n\texecuteRawASKQuery( documentURI:string, askQuery:string, requestOptions:RequestOptions = {} ):Promise<SPARQLRawResults> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService\n\t\t\t\t.executeRawASKQuery( documentURI, askQuery, requestOptions )\n\t\t\t\t.then( ( [ rawResults ] ) => rawResults )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteASKQuery( documentURI:string, askQuery:string, requestOptions:RequestOptions = {} ):Promise<boolean> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService\n\t\t\t\t.executeASKQuery( documentURI, askQuery, requestOptions )\n\t\t\t\t.then( ( [ rawResults ] ) => rawResults )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteRawSELECTQuery( documentURI:string, selectQuery:string, requestOptions:RequestOptions = {} ):Promise<SPARQLRawResults> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService\n\t\t\t\t.executeRawSELECTQuery( documentURI, selectQuery, requestOptions )\n\t\t\t\t.then( ( [ rawResults ] ) => rawResults )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteSELECTQuery<T extends object>( documentURI:string, selectQuery:string, requestOptions:RequestOptions = {} ):Promise<SPARQLSelectResults<T>> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService\n\t\t\t\t.executeSELECTQuery<T>( documentURI, selectQuery, this, requestOptions )\n\t\t\t\t.then( ( [ selectResults ] ) => selectResults )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteRawCONSTRUCTQuery( documentURI:string, constructQuery:string, requestOptions:RequestOptions = {} ):Promise<string> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService\n\t\t\t\t.executeRawCONSTRUCTQuery( documentURI, constructQuery, requestOptions )\n\t\t\t\t.then( ( [ strConstruct ] ) => strConstruct )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteRawDESCRIBEQuery( documentURI:string, describeQuery:string, requestOptions:RequestOptions = {} ):Promise<string> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService\n\t\t\t\t.executeRawDESCRIBEQuery( documentURI, describeQuery, requestOptions )\n\t\t\t\t.then( ( [ strDescribe ] ) => strDescribe )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\texecuteUPDATE( documentURI:string, update:string, requestOptions:RequestOptions = {} ):Promise<void> {\n\t\treturn promiseMethod( () => {\n\t\t\tdocumentURI = this._getRequestURI( documentURI );\n\n\t\t\tif( this.context && this.context.auth && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\n\t\t\treturn SPARQLService\n\t\t\t\t.executeUPDATE( documentURI, update, requestOptions )\n\t\t\t\t.then( () => {} )\n\t\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t\t} );\n\t}\n\n\n\tsparql( documentURI:string ):QueryClause<FinishSPARQLSelect> {\n\t\tlet builder:QueryClause<FinishSPARQLSelect> = new SPARQLBuilder( this, this._getRequestURI( documentURI ) );\n\n\t\tif( this.context ) {\n\t\t\tconst schema:DigestedObjectSchema = this._getProcessedSchema();\n\n\t\t\tbuilder = builder\n\t\t\t\t.base( schema.base )\n\t\t\t\t.vocab( schema.vocab );\n\n\t\t\tschema.prefixes.forEach( ( uri:string, prefix:string ) => {\n\t\t\t\tbuilder = builder.prefix( prefix, uri );\n\t\t\t} );\n\t\t}\n\n\t\treturn builder;\n\t}\n\n\ton( event:Event.CHILD_CREATED, uriPattern:string, onEvent:( message:ChildCreated ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Event.ACCESS_POINT_CREATED, uriPattern:string, onEvent:( message:AccessPointCreated ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Event.DOCUMENT_CREATED, uriPattern:string, onEvent:( message:DocumentCreated ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Event.DOCUMENT_MODIFIED, uriPattern:string, onEvent:( message:DocumentModified ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Event.DOCUMENT_DELETED, uriPattern:string, onEvent:( message:DocumentDeleted ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Event.MEMBER_ADDED, uriPattern:string, onEvent:( message:MemberAdded ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Event.MEMBER_REMOVED, uriPattern:string, onEvent:( message:MemberRemoved ) => void, onError:( error:Error ) => void ):void;\n\ton( event:Event | string, uriPattern:string, onEvent:( message:EventMessage ) => void, onError:( error:Error ) => void ):void;\n\ton<T extends EventMessage>( event:Event | string, uriPattern:string, onEvent:( message:T ) => void, onError:( error:Error ) => void ):void {\n\t\ttry {\n\t\t\tvalidateEventContext( this.context );\n\t\t\tconst destination:string = createDestination( event, uriPattern, this.context.baseURI );\n\t\t\t(this.context as CarbonLDP).messaging.subscribe( destination, onEvent, onError );\n\t\t} catch( error ) {\n\t\t\tif( ! onError ) throw error;\n\t\t\tonError( error );\n\t\t}\n\t}\n\n\toff( event:Event.CHILD_CREATED, uriPattern:string, onEvent:( message:ChildCreated ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Event.ACCESS_POINT_CREATED, uriPattern:string, onEvent:( message:AccessPointCreated ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Event.DOCUMENT_CREATED, uriPattern:string, onEvent:( message:DocumentCreated ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Event.DOCUMENT_MODIFIED, uriPattern:string, onEvent:( message:DocumentModified ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Event.DOCUMENT_DELETED, uriPattern:string, onEvent:( message:DocumentDeleted ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Event.MEMBER_ADDED, uriPattern:string, onEvent:( message:MemberAdded ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Event.MEMBER_REMOVED, uriPattern:string, onEvent:( message:MemberRemoved ) => void, onError:( error:Error ) => void ):void;\n\toff( event:Event | string, uriPattern:string, onEvent:( message:EventMessage ) => void, onError:( error:Error ) => void ):void;\n\toff<T extends EventMessage>( event:Event | string, uriPattern:string, onEvent:( message:T ) => void, onError:( error:Error ) => void ):void {\n\t\ttry {\n\t\t\tvalidateEventContext( this.context );\n\t\t\tconst destination:string = createDestination( event, uriPattern, this.context.baseURI );\n\t\t\t(this.context as CarbonLDP).messaging.unsubscribe( destination, onEvent );\n\t\t} catch( error ) {\n\t\t\tif( ! onError ) throw error;\n\t\t\tonError( error );\n\t\t}\n\t}\n\n\tone( event:Event.CHILD_CREATED, uriPattern:string, onEvent:( message:ChildCreated ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Event.ACCESS_POINT_CREATED, uriPattern:string, onEvent:( message:AccessPointCreated ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Event.DOCUMENT_CREATED, uriPattern:string, onEvent:( message:DocumentCreated ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Event.DOCUMENT_MODIFIED, uriPattern:string, onEvent:( message:DocumentModified ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Event.DOCUMENT_DELETED, uriPattern:string, onEvent:( message:DocumentDeleted ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Event.MEMBER_ADDED, uriPattern:string, onEvent:( message:MemberAdded ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Event.MEMBER_REMOVED, uriPattern:string, onEvent:( message:MemberRemoved ) => void, onError:( error:Error ) => void ):void;\n\tone( event:Event | string, uriPattern:string, onEvent:( message:EventMessage ) => void, onError:( error:Error ) => void ):void;\n\tone<T extends EventMessage>( event:Event | string, uriPattern:string, onEvent:( message:T ) => void, onError:( error:Error ) => void ):void {\n\t\tconst self:Documents = this;\n\t\tthis.on( event, uriPattern, function onEventWrapper( message:T ):void {\n\t\t\tonEvent( message );\n\t\t\tself.off( event, uriPattern, onEventWrapper, onError );\n\t\t}, onError );\n\t}\n\n\tonDocumentCreated( uriPattern:string, onEvent:( message:DocumentCreated ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Event.DOCUMENT_CREATED, uriPattern, onEvent, onError );\n\t}\n\n\tonChildCreated( uriPattern:string, onEvent:( message:ChildCreated ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Event.CHILD_CREATED, uriPattern, onEvent, onError );\n\t}\n\n\tonAccessPointCreated( uriPattern:string, onEvent:( message:AccessPointCreated ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Event.ACCESS_POINT_CREATED, uriPattern, onEvent, onError );\n\t}\n\n\tonDocumentModified( uriPattern:string, onEvent:( message:DocumentModified ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Event.DOCUMENT_MODIFIED, uriPattern, onEvent, onError );\n\t}\n\n\tonDocumentDeleted( uriPattern:string, onEvent:( message:DocumentDeleted ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Event.DOCUMENT_DELETED, uriPattern, onEvent, onError );\n\t}\n\n\tonMemberAdded( uriPattern:string, onEvent:( message:MemberAdded ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Event.MEMBER_ADDED, uriPattern, onEvent, onError );\n\t}\n\n\tonMemberRemoved( uriPattern:string, onEvent:( message:MemberRemoved ) => void, onError:( error:Error ) => void ):void {\n\t\treturn this.on( Event.MEMBER_REMOVED, uriPattern, onEvent, onError );\n\t}\n\n\n\t_convertRDFDocument<T extends object>( rdfDocument:RDFDocument, response:Response ):T & Document {\n\t\tconst [ documentResources ] = RDFDocument.getNodes( rdfDocument );\n\t\tif( documentResources.length === 0 ) throw new BadResponseError( `The RDFDocument: ${ rdfDocument[ \"@id\" ] }, doesn't contain a document resource.`, response );\n\t\tif( documentResources.length > 1 ) throw new BadResponseError( `The RDFDocument: ${ rdfDocument[ \"@id\" ] }, contains more than one document resource.`, response );\n\n\t\tconst persistedDocument:T & Document = new JSONLDCompacter( this )\n\t\t\t.compactDocument( rdfDocument );\n\t\tpersistedDocument._resolved = true;\n\n\t\treturn persistedDocument;\n\t}\n\n\t_getFreeResources( nodes:RDFNode[] ):FreeResources {\n\t\tlet freeResourcesDocument:FreeResources = FreeResources.createFrom( { _documents: this } );\n\n\t\tlet resources:TransientResource[] = nodes.map( node => freeResourcesDocument.createResource( node[ \"@id\" ] ) );\n\t\tthis._compact( nodes, resources, freeResourcesDocument );\n\n\t\treturn freeResourcesDocument;\n\t}\n\n\t_parseErrorResponse<T extends object>( response:Response | Error ):Promise<never> {\n\t\tif( response instanceof Error ) return Promise.reject( response );\n\n\t\tif( ! (response.status >= 400 && response.status < 600 && statusCodeMap.has( response.status )) )\n\t\t\treturn Promise.reject( new UnknownError( response.data, response ) );\n\n\t\tconst error:HTTPError = new (statusCodeMap.get( response.status ))( response.data, response );\n\t\tif( ! response.data || ! this.context ) return Promise.reject( error );\n\n\t\treturn new JSONLDParser()\n\t\t\t.parse( response.data )\n\t\t\t.then( ( freeNodes:RDFNode[] ) => {\n\t\t\t\tconst freeResources:FreeResources = this._getFreeResources( freeNodes );\n\t\t\t\tconst errorResponses:ErrorResponse[] = freeResources\n\t\t\t\t\t.getResources()\n\t\t\t\t\t.filter( ( resource ):resource is ErrorResponse => resource.hasType( ErrorResponse.TYPE ) );\n\t\t\t\tif( errorResponses.length === 0 ) return Promise.reject( new Errors.IllegalArgumentError( \"The response string does not contains a c:ErrorResponse.\" ) );\n\t\t\t\tif( errorResponses.length > 1 ) return Promise.reject( new Errors.IllegalArgumentError( \"The response string contains multiple c:ErrorResponse.\" ) );\n\n\t\t\t\tObject.assign( error, errorResponses[ 0 ] );\n\t\t\t\terror.message = ErrorResponse.getMessage( error );\n\t\t\t\treturn Promise.reject( error );\n\t\t\t}, () => {\n\t\t\t\treturn Promise.reject( error );\n\t\t\t} );\n\t}\n\n\n\tprivate _getFullDocument<T extends object>( uri:string, requestOptions:GETOptions ):T & Document | Promise<T & Document> {\n\t\tif( this.hasPointer( uri ) && ! requestOptions.ensureLatest ) {\n\t\t\tconst pointer:T & Pointer = this.getPointer( uri ) as T & Pointer;\n\t\t\tif( pointer.isResolved() && ! (pointer as Document).isPartial() ) return pointer as T & Document;\n\t\t}\n\n\t\tthis._setDefaultRequestOptions( requestOptions, LDP.RDFSource );\n\n\t\tif( this.documentsBeingResolved.has( uri ) )\n\t\t\treturn this.documentsBeingResolved.get( uri ) as Promise<T & Document>;\n\n\t\tconst promise:Promise<T & Document> = this\n\t\t\t._sendRequest( HTTPMethod.GET, uri, requestOptions, null, new RDFDocumentParser() )\n\t\t\t.then<T & Document>( ( [ rdfDocuments, response ]:[ RDFDocument[], Response ] ) => {\n\t\t\t\tconst eTag:string = response.getETag();\n\t\t\t\tif( eTag === null ) throw new BadResponseError( \"The response doesn't contain an ETag\", response );\n\n\t\t\t\tlet targetURI:string = uri;\n\t\t\t\tconst locationHeader:Header = response.getHeader( \"Content-Location\" );\n\t\t\t\tif( locationHeader ) {\n\t\t\t\t\tif( locationHeader.values.length !== 1 ) throw new BadResponseError( \"The response must contain one Content-Location header.\", response );\n\t\t\t\t\tconst locationString:string = \"\" + locationHeader;\n\n\t\t\t\t\tif( ! locationString ) throw new BadResponseError( `The response doesn't contain a valid 'Content-Location' header.`, response );\n\t\t\t\t\ttargetURI = locationString;\n\t\t\t\t}\n\n\t\t\t\tconst rdfDocument:RDFDocument = this._getRDFDocument( targetURI, rdfDocuments, response );\n\t\t\t\tif( rdfDocument === null ) throw new BadResponseError( \"No document was returned.\", response );\n\n\t\t\t\tconst document:T & Document = this._convertRDFDocument<T>( rdfDocument, response );\n\t\t\t\tdocument._eTag = eTag;\n\n\t\t\t\tthis.documentsBeingResolved.delete( uri );\n\t\t\t\treturn document;\n\t\t\t} ).catch( error => {\n\t\t\t\tthis.documentsBeingResolved.delete( uri );\n\t\t\t\treturn Promise.reject( error );\n\t\t\t} );\n\n\t\tthis.documentsBeingResolved.set( uri, promise );\n\t\treturn promise;\n\t}\n\n\tprivate _getPartialDocument<T extends object>( uri:string, requestOptions:RequestOptions, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & Document> {\n\t\tconst queryContext:QueryContextBuilder = new QueryContextBuilder( this.context );\n\n\t\tconst documentProperty:QueryProperty = queryContext\n\t\t\t.addProperty( \"document\" )\n\t\t\t.setOptional( false );\n\n\t\tconst propertyValue:ValuesToken = new ValuesToken().addValues( documentProperty.variable, queryContext.compactIRI( uri ) );\n\t\tdocumentProperty.addPattern( propertyValue );\n\n\t\tRequestUtils.setRetrievalPreferences( { include: [ C.PreferDocumentETags ] }, requestOptions );\n\n\t\treturn this\n\t\t\t._executeQueryBuilder<T>( uri, requestOptions, queryContext, documentProperty, queryBuilderFn )\n\t\t\t.then<T & Document>( ( documents ) => documents[ 0 ] );\n\t}\n\n\n\tprivate _patchDocument<T extends object>( persistedDocument:T & Document, requestOptions:RequestOptions ):T & Document | Promise<T & Document> {\n\t\tconst uri:string = this._getRequestURI( persistedDocument.id );\n\n\t\tif( ! persistedDocument.isDirty() ) return persistedDocument;\n\t\tif( persistedDocument.isLocallyOutDated() ) throw new Errors.IllegalStateError( \"Cannot save an outdated document.\" );\n\n\t\tthis._setDefaultRequestOptions( requestOptions );\n\t\tRequestUtils.setContentTypeHeader( \"text/ldpatch\", requestOptions );\n\t\tRequestUtils.setIfMatchHeader( persistedDocument._eTag, requestOptions );\n\n\t\tpersistedDocument._normalize();\n\t\tconst deltaCreator:DeltaCreator = new DeltaCreator( this.jsonldConverter );\n\t\t[ persistedDocument, ...persistedDocument.getFragments() ].forEach( ( resource:Resource ) => {\n\t\t\tconst schema:DigestedObjectSchema = this.getSchemaFor( resource );\n\t\t\tdeltaCreator.addResource( schema, resource._snapshot, resource );\n\t\t} );\n\n\t\tconst body:string = deltaCreator.getPatch();\n\n\t\treturn this\n\t\t\t._sendRequest( HTTPMethod.PATCH, uri, requestOptions, body )\n\t\t\t.then<T & Document>( ( response:Response ) => {\n\t\t\t\treturn this._applyResponseData( persistedDocument, response );\n\t\t\t} );\n\t}\n\n\n\tprivate _refreshFullDocument<T extends object>( persistedDocument:T & Document, requestOptions:RequestOptions ):Promise<T & Document> {\n\t\tconst uri:string = this._getRequestURI( persistedDocument.id );\n\n\t\tthis._setDefaultRequestOptions( requestOptions, LDP.RDFSource );\n\t\tRequestUtils.setIfNoneMatchHeader( persistedDocument._eTag, requestOptions );\n\n\t\treturn this\n\t\t\t._sendRequest( HTTPMethod.GET, uri, requestOptions, null, new RDFDocumentParser() )\n\t\t\t.then<T & Document>( ( [ rdfDocuments, response ]:[ RDFDocument[], Response ] ) => {\n\t\t\t\tif( response === null ) return persistedDocument;\n\n\t\t\t\tconst eTag:string = response.getETag();\n\t\t\t\tif( eTag === null ) throw new BadResponseError( \"The response doesn't contain an ETag.\", response );\n\n\t\t\t\tconst rdfDocument:RDFDocument = this._getRDFDocument( uri, rdfDocuments, response );\n\t\t\t\tif( rdfDocument === null ) throw new BadResponseError( \"No document was returned.\", response );\n\n\t\t\t\tconst updatedPersistedDocument:T & Document = this._convertRDFDocument( rdfDocument, response );\n\t\t\t\tupdatedPersistedDocument._eTag = eTag;\n\n\t\t\t\treturn updatedPersistedDocument;\n\t\t\t} ).catch<T & Document>( ( error:HTTPError ) => {\n\t\t\t\tif( error.statusCode === 304 ) return persistedDocument;\n\t\t\t\treturn Promise.reject( error );\n\t\t\t} );\n\t}\n\n\tprivate _refreshPartialDocument<T extends object>( persistedDocument:T & Document, requestOptions:RequestOptions ):Promise<T & Document> {\n\t\tconst uri:string = this._getRequestURI( persistedDocument.id );\n\t\tconst queryContext:QueryContextPartial = new QueryContextPartial( persistedDocument, this.context );\n\n\t\tconst targetName:string = \"document\";\n\t\tconst constructPatterns:OptionalToken = new OptionalToken()\n\t\t\t.addPattern( new ValuesToken()\n\t\t\t\t.addValues( queryContext.getVariable( targetName ), new IRIToken( uri ) )\n\t\t\t)\n\t\t;\n\n\t\tthis._addRefreshQueryPatterns( queryContext, constructPatterns, persistedDocument, targetName );\n\n\t\tRequestUtils.setRetrievalPreferences( { include: [ C.PreferDocumentETags ] }, requestOptions );\n\n\t\treturn this\n\t\t\t._executeConstructPatterns<T>( uri, requestOptions, queryContext, targetName, constructPatterns.patterns, persistedDocument )\n\t\t\t.then<T & Document>( ( documents ) => documents[ 0 ] );\n\t}\n\n\tprivate _addRefreshQueryPatterns( queryContext:QueryContextPartial, parentAdder:OptionalToken, resource:Resource, parentName:string ):void {\n\t\tif( resource._partialMetadata.schema === PartialMetadata.ALL ) {\n\t\t\tparentAdder.addPattern( createAllPattern( queryContext, parentName ) );\n\t\t\treturn;\n\t\t}\n\n\t\tparentAdder.addPattern( createTypesPattern( queryContext, parentName ) );\n\n\t\tresource._partialMetadata.schema.properties.forEach( ( digestedProperty, propertyName ) => {\n\t\t\tconst path:string = `${ parentName }.${ propertyName }`;\n\n\t\t\tconst propertyPattern:OptionalToken = new OptionalToken()\n\t\t\t\t.addPattern( ...createPropertyPatterns(\n\t\t\t\t\tqueryContext,\n\t\t\t\t\tparentName,\n\t\t\t\t\tpath,\n\t\t\t\t\tdigestedProperty\n\t\t\t\t) );\n\t\t\tparentAdder.addPattern( propertyPattern );\n\n\t\t\tconst propertyValues:any[] = Array.isArray( resource[ propertyName ] ) ? resource[ propertyName ] : [ resource[ propertyName ] ];\n\t\t\tconst propertyFragment:Fragment = propertyValues\n\t\t\t\t.filter( Fragment.is )\n\t\t\t\t.find( fragment => fragment.isPartial() );\n\t\t\tif( ! propertyFragment ) return;\n\n\t\t\tthis._addRefreshQueryPatterns( queryContext, propertyPattern, propertyFragment, path );\n\t\t} );\n\t}\n\n\n\tprivate _executeChildrenBuilder<T extends object>( uri:string, requestOptions:RequestOptions, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<(T & Document)[]> {\n\t\treturn promiseMethod( () => {\n\t\t\turi = this._getRequestURI( uri );\n\n\t\t\tconst queryContext:QueryContextBuilder = new QueryContextBuilder( this.context );\n\t\t\tconst childrenProperty:QueryProperty = queryContext\n\t\t\t\t.addProperty( \"child\" )\n\t\t\t\t.setOptional( false );\n\n\t\t\tconst selectChildren:SelectToken = new SelectToken( \"DISTINCT\" )\n\t\t\t\t.addVariable( childrenProperty.variable )\n\t\t\t\t.addPattern( new SubjectToken( queryContext.compactIRI( uri ) )\n\t\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( LDP.contains ) )\n\t\t\t\t\t\t.addObject( childrenProperty.variable )\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t;\n\t\t\tchildrenProperty.addPattern( selectChildren );\n\n\t\t\treturn this._executeQueryBuilder<T>( uri, requestOptions, queryContext, childrenProperty, queryBuilderFn );\n\t\t} );\n\t}\n\n\tprivate _executeMembersBuilder<T extends object>( uri:string, requestOptions:RequestOptions, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<(T & Document)[]> {\n\t\treturn promiseMethod( () => {\n\t\t\turi = this._getRequestURI( uri );\n\n\t\t\tconst queryContext:QueryContextBuilder = new QueryContextBuilder( this.context );\n\t\t\tconst membersProperty:QueryProperty = queryContext\n\t\t\t\t.addProperty( \"member\" )\n\t\t\t\t.setOptional( false );\n\n\t\t\tconst membershipResource:VariableToken = queryContext.getVariable( \"membershipResource\" );\n\t\t\tconst hasMemberRelation:VariableToken = queryContext.getVariable( \"hasMemberRelation\" );\n\t\t\tconst selectMembers:SelectToken = new SelectToken( \"DISTINCT\" )\n\t\t\t\t.addVariable( membersProperty.variable )\n\t\t\t\t.addPattern( new SubjectToken( queryContext.compactIRI( uri ) )\n\t\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( LDP.membershipResource ) )\n\t\t\t\t\t\t.addObject( membershipResource )\n\t\t\t\t\t)\n\t\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( LDP.hasMemberRelation ) )\n\t\t\t\t\t\t.addObject( hasMemberRelation )\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t\t.addPattern( new SubjectToken( membershipResource )\n\t\t\t\t\t.addPredicate( new PredicateToken( hasMemberRelation )\n\t\t\t\t\t\t.addObject( membersProperty.variable )\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t;\n\t\t\tmembersProperty.addPattern( selectMembers );\n\n\t\t\treturn this._executeQueryBuilder<T>( uri, requestOptions, queryContext, membersProperty, queryBuilderFn );\n\t\t} );\n\t}\n\n\tprivate _executeQueryBuilder<T extends object>( uri:string, requestOptions:RequestOptions, queryContext:QueryContextBuilder, targetProperty:QueryProperty, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<(T & Document)[]> {\n\t\tconst Builder:typeof QueryDocumentBuilder = targetProperty.name === \"document\" ?\n\t\t\tQueryDocumentBuilder : QueryDocumentsBuilder;\n\t\tconst queryBuilder:QueryDocumentBuilder | QueryDocumentBuilder = new Builder( queryContext, targetProperty );\n\n\t\ttargetProperty.setType( queryBuilderFn ?\n\t\t\tqueryBuilderFn === emptyQueryBuildFn ?\n\t\t\t\tQueryPropertyType.EMPTY :\n\t\t\t\tQueryPropertyType.PARTIAL :\n\t\t\tQueryPropertyType.FULL\n\t\t);\n\n\t\tif( queryBuilderFn && queryBuilderFn.call( void 0, queryBuilder ) !== queryBuilder )\n\t\t\tthrow new Errors.IllegalArgumentError( \"The provided query builder was not returned\" );\n\n\t\tconst constructPatterns:PatternToken[] = targetProperty.getPatterns();\n\t\treturn this\n\t\t\t._executeConstructPatterns<T>( uri, requestOptions, queryContext, targetProperty.name, constructPatterns )\n\t\t\t.then( ( documents ) => {\n\t\t\t\tif( queryBuilder instanceof QueryDocumentsBuilder && queryBuilder._orderData ) {\n\t\t\t\t\tconst { path, flow } = queryBuilder._orderData;\n\t\t\t\t\tconst inverter:number = flow === \"DESC\" ? - 1 : 1;\n\n\t\t\t\t\tdocuments.sort( ( a:any, b:any ) => {\n\t\t\t\t\t\ta = getPathProperty( a, path );\n\t\t\t\t\t\tb = getPathProperty( b, path );\n\n\t\t\t\t\t\tconst aValue:any = Pointer.is( a ) ? a.id : a;\n\t\t\t\t\t\tconst bValue:any = Pointer.is( b ) ? b.id : b;\n\n\t\t\t\t\t\tif( aValue === bValue ) return 0;\n\n\t\t\t\t\t\tif( aValue === void 0 ) return - 1 * inverter;\n\t\t\t\t\t\tif( bValue === void 0 ) return inverter;\n\n\t\t\t\t\t\tif( ! areDifferentType( a, b ) ) {\n\t\t\t\t\t\t\tif( Pointer.is( a ) ) {\n\t\t\t\t\t\t\t\tconst aIsBNode:boolean = URI.isBNodeID( aValue );\n\t\t\t\t\t\t\t\tconst bIsBNode:boolean = URI.isBNodeID( bValue );\n\n\t\t\t\t\t\t\t\tif( aIsBNode && ! bIsBNode ) return - 1 * inverter;\n\t\t\t\t\t\t\t\tif( bIsBNode && ! aIsBNode ) return inverter;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif( Pointer.is( a ) ) return - 1 * inverter;\n\t\t\t\t\t\t\tif( Pointer.is( b ) ) return inverter;\n\n\t\t\t\t\t\t\tif( Utils.isNumber( a ) ) return - 1 * inverter;\n\t\t\t\t\t\t\tif( Utils.isNumber( b ) ) return inverter;\n\n\t\t\t\t\t\t\tif( Utils.isDate( a ) ) return - 1 * inverter;\n\t\t\t\t\t\t\tif( Utils.isDate( b ) ) return inverter;\n\n\t\t\t\t\t\t\tif( Utils.isBoolean( a ) ) return - 1 * inverter;\n\t\t\t\t\t\t\tif( Utils.isBoolean( b ) ) return inverter;\n\n\t\t\t\t\t\t\tif( Utils.isString( a ) ) return - 1 * inverter;\n\t\t\t\t\t\t\tif( Utils.isString( b ) ) return inverter;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif( aValue < bValue ) return - 1 * inverter;\n\t\t\t\t\t\tif( aValue > bValue ) return inverter;\n\t\t\t\t\t} );\n\t\t\t\t}\n\n\t\t\t\treturn documents;\n\t\t\t} )\n\t\t\t;\n\t}\n\n\tprivate _executeConstructPatterns<T extends object>( uri:string, requestOptions:RequestOptions, queryContext:QueryContext, targetName:string, constructPatterns:PatternToken[], targetDocument?:T & Document ):Promise<(T & Document)[]> {\n\t\tconst queryMetadata:VariableToken = queryContext.getVariable( \"queryMetadata\" );\n\t\tconst accessPointsMetadata:VariableToken = queryContext.getVariable( \"accessPointsMetadata\" );\n\t\tconst construct:ConstructToken = new ConstructToken()\n\t\t\t.addTriple( new SubjectToken( queryMetadata )\n\t\t\t\t.addPredicate( new PredicateToken( \"a\" )\n\t\t\t\t\t.addObject( queryContext.compactIRI( C.VolatileResource ) )\n\t\t\t\t\t.addObject( queryContext.compactIRI( C.QueryMetadata ) )\n\t\t\t\t)\n\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( C.target ) )\n\t\t\t\t\t.addObject( queryContext.getVariable( targetName ) )\n\t\t\t\t)\n\t\t\t)\n\t\t\t.addPattern( new BindToken( \"BNODE()\", queryMetadata ) )\n\t\t\t// TODO: Make GroupGraphToken in `sparqler`\n\t\t\t.addPattern( `{ ${ new BindToken( \"BNODE()\", accessPointsMetadata ) } }` as any )\n\t\t\t.addPattern( ...constructPatterns );\n\n\t\tconst query:QueryToken = new QueryToken( construct )\n\t\t\t.addPrologues( ...queryContext.getPrologues() );\n\n\t\tconst accessPointsTriple:SubjectToken = new SubjectToken( accessPointsMetadata )\n\t\t\t.addPredicate( new PredicateToken( \"a\" )\n\t\t\t\t.addObject( queryContext.compactIRI( C.VolatileResource ) )\n\t\t\t\t.addObject( queryContext.compactIRI( C.AccessPointsMetadata ) )\n\t\t\t);\n\t\tconstruct.addTriple( accessPointsTriple );\n\n\t\tgetResourcesVariables( constructPatterns )\n\t\t\t.forEach( resource => {\n\t\t\t\tconst name:string = resource.name.replace( /__/g, \".\" );\n\t\t\t\tconst accessPoints:VariableToken = queryContext.getVariable( name + \".accessPoints\" );\n\t\t\t\tconst relation:VariableToken = queryContext.getVariable( name + \".accessPoints.hasMemberRelation\" );\n\n\t\t\t\tconstruct\n\t\t\t\t\t.addPattern( new OptionalToken()\n\t\t\t\t\t\t.addPattern( new SubjectToken( resource )\n\t\t\t\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( C.accessPoint ) )\n\t\t\t\t\t\t\t\t.addObject( accessPoints )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t\t.addPattern( new SubjectToken( accessPoints )\n\t\t\t\t\t\t\t.addPredicate( new PredicateToken( queryContext.compactIRI( LDP.hasMemberRelation ) )\n\t\t\t\t\t\t\t\t.addObject( relation )\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t);\n\n\t\t\t\taccessPointsTriple\n\t\t\t\t\t.addPredicate( new PredicateToken( relation )\n\t\t\t\t\t\t.addObject( accessPoints ) );\n\t\t\t} );\n\n\t\tconst triples:SubjectToken[] = getAllTriples( constructPatterns );\n\t\tconstruct.addTriple( ...triples );\n\n\t\tRequestUtils.setRetrievalPreferences( { include: [ C.PreferResultsContext ] }, requestOptions );\n\n\t\treturn this\n\t\t\t.executeRawCONSTRUCTQuery( uri, query.toString(), requestOptions )\n\t\t\t.then( ( jsonldString ) => {\n\t\t\t\treturn new JSONLDParser().parse( jsonldString );\n\n\t\t\t} ).then<(T & Document)[]>( ( rdfNodes:RDFNode[] ) => {\n\t\t\t\tconst targetETag:string = targetDocument && targetDocument._eTag;\n\t\t\t\tif( targetDocument ) targetDocument._eTag = void 0;\n\n\t\t\t\tconst freeResources:TransientResource[] = this\n\t\t\t\t\t._getFreeResources( RDFNode.getFreeNodes( rdfNodes ) )\n\t\t\t\t\t.getResources()\n\t\t\t\t;\n\n\t\t\t\tfreeResources\n\t\t\t\t\t.filter( ResponseMetadata.is )\n\t\t\t\t\t.map<DocumentMetadata[] | DocumentMetadata>( responseMetadata => responseMetadata.documentsMetadata || responseMetadata[ C.documentMetadata ] )\n\t\t\t\t\t.map<DocumentMetadata[]>( documentsMetadata => Array.isArray( documentsMetadata ) ? documentsMetadata : [ documentsMetadata ] )\n\t\t\t\t\t.forEach( documentsMetadata => documentsMetadata.forEach( documentMetadata => {\n\t\t\t\t\t\tif( ! documentMetadata ) return;\n\n\t\t\t\t\t\tconst relatedDocument:Document = documentMetadata.relatedDocument || documentMetadata[ C.relatedDocument ];\n\t\t\t\t\t\tconst eTag:string = documentMetadata.eTag || documentMetadata[ C.eTag ];\n\n\t\t\t\t\t\tif( ! eTag ) return;\n\t\t\t\t\t\trelatedDocument._resolved = true;\n\n\t\t\t\t\t\tif( relatedDocument._eTag === void 0 ) relatedDocument._eTag = eTag;\n\t\t\t\t\t\tif( relatedDocument._eTag !== eTag ) relatedDocument._eTag = null;\n\t\t\t\t\t} ) );\n\n\t\t\t\tif( targetDocument && targetETag === targetDocument._eTag )\n\t\t\t\t\treturn [ targetDocument ];\n\n\t\t\t\tconst rdfDocuments:RDFDocument[] = rdfNodes\n\t\t\t\t\t.filter<any>( RDFDocument.is );\n\n\t\t\t\tconst targetSet:Set<string> = new Set( freeResources\n\t\t\t\t\t.filter( QueryMetadata.is )\n\t\t\t\t\t.map( x => this.context ? x.target : x[ C.target ] )\n\t\t\t\t\t// Alternative to flatMap\n\t\t\t\t\t.reduce( ( targets, currentTargets ) => targets.concat( currentTargets ), [] )\n\t\t\t\t\t.map( x => x.id )\n\t\t\t\t);\n\t\t\t\tconst targetDocuments:RDFDocument[] = rdfDocuments\n\t\t\t\t\t.filter( x => targetSet.has( x[ \"@id\" ] ) );\n\n\t\t\t\tconst documents:(T & Document)[] = new JSONLDCompacter( this, targetName, queryContext )\n\t\t\t\t\t.compactDocuments( rdfDocuments, targetDocuments );\n\n\t\t\t\tconst accessPointsMetadatas:AccessPointsMetadata[] = freeResources\n\t\t\t\t\t.filter( AccessPointsMetadata.is );\n\t\t\t\tthis._applyAccessPointsMetadatas( accessPointsMetadatas );\n\n\t\t\t\treturn documents;\n\t\t\t} );\n\t}\n\n\n\tprivate _persistChildDocument<T extends object>( parentURI:string, childObject:T, slug:string, requestOptions:RequestOptions ):Promise<T & ProtectedDocument> {\n\t\tif( Document.is( childObject ) ) throw new Errors.IllegalArgumentError( \"The child provided has been already persisted.\" );\n\t\tlet childDocument:T & TransientDocument = TransientDocument.is( childObject ) ? <T & TransientDocument> childObject : TransientDocument.createFrom<T>( childObject );\n\n\t\tthis._setDefaultRequestOptions( requestOptions, LDP.Container );\n\t\treturn this._persistDocument<T & TransientDocument, ProtectedDocument>( parentURI, slug, childDocument, requestOptions );\n\t}\n\n\tprivate _persistAccessPoint<T extends object>( documentURI:string, accessPoint:T & BaseAccessPoint, slug:string, requestOptions:RequestOptions ):Promise<T & AccessPoint> {\n\t\tif( Document.is( accessPoint ) ) throw new Errors.IllegalArgumentError( \"The access-point provided has been already persisted.\" );\n\n\t\tconst accessPointDocument:T & TransientAccessPoint = TransientAccessPoint.is( accessPoint ) ?\n\t\t\taccessPoint : TransientAccessPoint.createFrom<T>( accessPoint );\n\n\t\tif( ! accessPointDocument.membershipResource ) accessPointDocument.membershipResource = this.getPointer( documentURI );\n\t\telse if( accessPointDocument.membershipResource.id !== documentURI ) throw new Errors.IllegalArgumentError( \"The documentURI must be the same as the accessPoint's membershipResource.\" );\n\n\t\tthis._setDefaultRequestOptions( requestOptions, LDP.RDFSource );\n\t\treturn this._persistDocument<T & TransientAccessPoint, AccessPoint>( documentURI, slug, accessPointDocument, requestOptions );\n\t}\n\n\tprivate _persistDocument<T extends TransientDocument, W extends ProtectedDocument>( parentURI:string, slug:string, document:T, requestOptions:RequestOptions ):Promise<T & W> {\n\t\tRequestUtils.setContentTypeHeader( \"application/ld+json\", requestOptions );\n\n\t\tif( document.id ) {\n\t\t\tlet childURI:string = document.id;\n\t\t\tif( ! ! this.context ) childURI = this.context.resolve( childURI );\n\t\t\tif( ! URI.isBaseOf( parentURI, childURI ) ) {\n\t\t\t\treturn Promise.reject( new Errors.IllegalArgumentError( \"The document's URI is not relative to the parentURI specified\" ) );\n\t\t\t}\n\t\t}\n\n\t\tif( document[ \"__CarbonSDK_InProgressOfPersisting\" ] ) return Promise.reject( new Errors.IllegalArgumentError( \"The document is already being persisted.\" ) );\n\t\tObject.defineProperty( document, \"__CarbonSDK_InProgressOfPersisting\", { configurable: true, enumerable: false, writable: false, value: true } );\n\n\t\tlet body:string = JSON.stringify( document.toJSON( this, this.jsonldConverter ) );\n\n\t\tif( ! ! slug ) RequestUtils.setSlug( slug, requestOptions );\n\n\t\treturn this\n\t\t\t._sendRequest( HTTPMethod.POST, parentURI, requestOptions, body )\n\t\t\t.then<T & W>( ( response:Response ) => {\n\t\t\t\tdelete document[ \"__CarbonSDK_InProgressOfPersisting\" ];\n\n\t\t\t\tlet locationHeader:Header = response.getHeader( \"Location\" );\n\t\t\t\tif( locationHeader === null || locationHeader.values.length < 1 ) throw new BadResponseError( \"The response is missing a Location header.\", response );\n\t\t\t\tif( locationHeader.values.length !== 1 ) throw new BadResponseError( \"The response contains more than one Location header.\", response );\n\n\t\t\t\tconst localID:string = this._getPointerID( locationHeader.values[ 0 ].toString() );\n\t\t\t\tthis.pointers.set( localID, this._createPointerFrom( document, localID ) );\n\n\t\t\t\tconst persistedDocument:T & W & ProtectedDocument = <T & W & ProtectedDocument> ProtectedDocument.decorate<T>( document, this );\n\t\t\t\tpersistedDocument.getFragments().forEach( Fragment.decorate );\n\n\t\t\t\treturn this._applyResponseData( persistedDocument, response );\n\t\t\t} ).catch( ( error ) => {\n\t\t\t\tdelete document[ \"__CarbonSDK_InProgressOfPersisting\" ];\n\t\t\t\treturn Promise.reject( error );\n\t\t\t} );\n\t}\n\n\n\tprivate _getRDFDocument( requestURL:string, rdfDocuments:RDFDocument[], response:Response ):RDFDocument {\n\t\trdfDocuments = rdfDocuments.filter( ( rdfDocument:RDFDocument ) => rdfDocument[ \"@id\" ] === requestURL );\n\n\t\tif( rdfDocuments.length > 1 ) throw new BadResponseError( \"Several documents share the same id.\", response );\n\n\t\treturn rdfDocuments.length > 0 ? rdfDocuments[ 0 ] : null;\n\t}\n\n\n\tprivate _getPointerID( uri:string ):string {\n\t\tif( URI.isBNodeID( uri ) ) throw new Errors.IllegalArgumentError( \"BNodes cannot be fetched directly.\" );\n\t\t// TODO: Make named fragments independently resolvable\n\t\t/*\n\t\t\tif( URI.Util.hasFragment( uri ) ) throw new Errors.IllegalArgumentError( \"Fragment URI's cannot be fetched directly.\" );\n\t\t*/\n\n\t\tif( ! ! this.context ) {\n\t\t\turi = ObjectSchemaUtils.resolveURI( uri, this.getGeneralSchema() );\n\n\t\t\tif( ! URI.isRelative( uri ) ) {\n\t\t\t\tconst baseURI:string = this.context.baseURI;\n\t\t\t\tif( ! URI.isBaseOf( baseURI, uri ) ) return null;\n\n\t\t\t\treturn uri.substring( baseURI.length );\n\t\t\t} else {\n\t\t\t\treturn uri[ 0 ] === \"/\" ? uri.substr( 1 ) : uri;\n\t\t\t}\n\t\t} else {\n\t\t\tif( URI.isPrefixed( uri ) ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support prefixed URIs.\" );\n\t\t\tif( URI.isRelative( uri ) ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\treturn uri;\n\t\t}\n\t}\n\n\tprivate _createPointer( localID:string ):Pointer {\n\t\treturn this._createPointerFrom( {}, localID );\n\t}\n\n\tprivate _createPointerFrom<T extends object>( object:T, localID:string ):T & Pointer {\n\t\tconst pointer:T & Pointer = Pointer.createFrom<T>( object );\n\t\tpointer.id = this.context ? this.context.resolve( localID ) : localID;\n\n\t\tconst resolve:Pointer[ \"resolve\" ] = <W extends object>( requestOptionsOrQueryBuilderFn?:GETOptions | (( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder), queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<W & T & Document> => {\n\t\t\tlet requestOptions:GETOptions;\n\t\t\tif( Utils.isFunction( requestOptionsOrQueryBuilderFn ) ) {\n\t\t\t\trequestOptions = {};\n\t\t\t\tqueryBuilderFn = requestOptionsOrQueryBuilderFn;\n\t\t\t} else {\n\t\t\t\trequestOptions = requestOptionsOrQueryBuilderFn;\n\t\t\t}\n\n\t\t\tif( queryBuilderFn && \"types\" in pointer ) {\n\t\t\t\tconst resource:TransientResource = pointer as TransientResource;\n\t\t\t\tconst superQueryBuilderFn:typeof queryBuilderFn = queryBuilderFn;\n\t\t\t\tqueryBuilderFn = _ => {\n\t\t\t\t\tresource.types.forEach( type => _.withType( type ) );\n\t\t\t\t\treturn superQueryBuilderFn.call( void 0, _ );\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn this.get( pointer.id, requestOptions, queryBuilderFn );\n\t\t};\n\n\t\tObject.defineProperty( pointer, \"resolve\", {\n\t\t\twritable: false,\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: resolve,\n\t\t} );\n\n\t\treturn pointer;\n\t}\n\n\n\tprivate _compact( expandedObjects:Object[], targetObjects:Object[], pointerLibrary:PointerLibrary ):Object[];\n\tprivate _compact( expandedObject:Object, targetObject:Object, pointerLibrary:PointerLibrary ):Object;\n\tprivate _compact( expandedObjectOrObjects:any, targetObjectOrObjects:any, pointerLibrary:PointerLibrary ):any {\n\t\tif( ! Utils.isArray( expandedObjectOrObjects ) ) return this._compactSingle( expandedObjectOrObjects, targetObjectOrObjects, pointerLibrary );\n\n\t\tlet expandedObjects:Object[] = expandedObjectOrObjects;\n\t\tlet targetObjects:Object[] = ! ! targetObjectOrObjects ? targetObjectOrObjects : [];\n\t\tfor( let i:number = 0, length:number = expandedObjects.length; i < length; i ++ ) {\n\t\t\tlet expandedObject:Object = expandedObjects[ i ];\n\t\t\tlet targetObject:Object = targetObjects[ i ] = ! ! targetObjects[ i ] ? targetObjects[ i ] : {};\n\n\t\t\tthis._compactSingle( expandedObject, targetObject, pointerLibrary );\n\t\t}\n\n\t\treturn targetObjects;\n\t}\n\n\tprivate _compactSingle( expandedObject:Object, targetObject:Object, pointerLibrary:PointerLibrary ):Object {\n\t\tlet digestedSchema:DigestedObjectSchema = this._getDigestedObjectSchemaForExpandedObject( expandedObject );\n\n\t\treturn this.jsonldConverter.compact( expandedObject, targetObject, digestedSchema, pointerLibrary );\n\t}\n\n\n\tprivate _getDigestedObjectSchemaForExpandedObject( expandedObject:Object ):DigestedObjectSchema {\n\t\tlet types:string[] = RDFNode.getTypes( <any> expandedObject );\n\n\t\treturn this._getDigestedObjectSchema( types, expandedObject[ \"@id\" ] );\n\t}\n\n\tprivate _getDigestedObjectSchemaForDocument( document:TransientDocument ):DigestedObjectSchema {\n\t\tif( Resource.isDecorated( document ) && document.isPartial() ) {\n\t\t\tconst schemas:DigestedObjectSchema[] = [ document._partialMetadata.schema ];\n\t\t\treturn this._getProcessedSchema( schemas );\n\t\t} else {\n\t\t\tconst types:string[] = document.types || [];\n\t\t\treturn this._getDigestedObjectSchema( types, document.id );\n\t\t}\n\t}\n\n\tprivate _getDigestedObjectSchema( objectTypes:string[], objectID:string ):DigestedObjectSchema {\n\t\tif( ! this.context ) return new DigestedObjectSchema();\n\n\t\tif(\n\t\t\tUtils.isDefined( objectID ) &&\n\t\t\t! URI.hasFragment( objectID ) &&\n\t\t\t! URI.isBNodeID( objectID ) &&\n\t\t\tobjectTypes.indexOf( TransientDocument.TYPE ) === - 1\n\t\t)\n\t\t\tobjectTypes = objectTypes.concat( TransientDocument.TYPE );\n\n\t\tconst schemas:DigestedObjectSchema[] = objectTypes\n\t\t\t.filter( type => this.context.hasObjectSchema( type ) )\n\t\t\t.map( type => this.context.getObjectSchema( type ) )\n\t\t;\n\n\t\treturn this._getProcessedSchema( schemas );\n\t}\n\n\tprivate _getProcessedSchema( objectSchemas:DigestedObjectSchema[] = [] ):DigestedObjectSchema {\n\t\tobjectSchemas.unshift( this.context.getObjectSchema() );\n\t\treturn ObjectSchemaDigester\n\t\t\t.combineDigestedObjectSchemas( objectSchemas );\n\t}\n\n\n\tprivate _getRequestURI( uri:string ):string {\n\t\tif( URI.isBNodeID( uri ) ) {\n\t\t\tthrow new Errors.IllegalArgumentError( \"BNodes cannot be fetched directly.\" );\n\t\t} else if( URI.isPrefixed( uri ) ) {\n\t\t\tif( ! this.context ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support prefixed URIs.\" );\n\t\t\turi = ObjectSchemaUtils.resolveURI( uri, this.context.getObjectSchema() );\n\t\t\tif( URI.isPrefixed( uri ) ) throw new Errors.IllegalArgumentError( `The prefixed URI \"${ uri }\" could not be resolved.` );\n\t\t} else if( URI.isRelative( uri ) ) {\n\t\t\tif( ! this.context ) throw new Errors.IllegalArgumentError( \"This Documents instance doesn't support relative URIs.\" );\n\t\t\turi = this.context.resolve( uri );\n\t\t} else if( this.context && ! URI.isBaseOf( this.context.baseURI, uri ) ) {\n\t\t\tthrow new Errors.IllegalArgumentError( `\"${ uri }\" isn't a valid URI for this Carbon instance.` );\n\t\t}\n\t\treturn uri;\n\t}\n\n\tprivate _setDefaultRequestOptions( requestOptions:RequestOptions, interactionModel?:string ):RequestOptions {\n\t\tif( this.context && this.context.auth && this.context.auth.isAuthenticated() ) this.context.auth.addAuthentication( requestOptions );\n\t\tif( interactionModel ) RequestUtils.setPreferredInteractionModel( interactionModel, requestOptions );\n\n\t\tRequestUtils.setAcceptHeader( \"application/ld+json\", requestOptions );\n\n\t\treturn requestOptions;\n\t}\n\n\tprivate _updateFromPreferenceApplied<T extends object>( persistedDocument:T & Document, rdfDocuments:RDFDocument[], response:Response ):T {\n\t\tconst eTag:string = response.getETag();\n\t\tif( eTag === null ) throw new BadResponseError( \"The response doesn't contain an ETag\", response );\n\n\t\tconst rdfDocument:RDFDocument = this._getRDFDocument( persistedDocument.id, rdfDocuments, response );\n\t\tif( rdfDocument === null ) throw new BadResponseError( \"No document was returned.\", response );\n\n\t\tpersistedDocument = this._convertRDFDocument<T>( rdfDocument, response );\n\t\tpersistedDocument._eTag = eTag;\n\n\t\treturn persistedDocument;\n\t}\n\n\tprivate _parseMembers( pointers:(string | Pointer)[] ):Pointer[] {\n\t\treturn pointers.map( pointer => {\n\t\t\tif( Utils.isString( pointer ) ) return this.getPointer( pointer );\n\t\t\tif( Pointer.is( pointer ) ) return pointer;\n\n\t\t\tthrow new Errors.IllegalArgumentError( \"No CarbonLDP.Pointer or URI provided.\" );\n\t\t} );\n\t}\n\n\tprivate _applyResponseData<T extends Document>( persistedProtectedDocument:T, response:Response ):T | Promise<T> {\n\t\tif( response.status === 204 || ! response.data ) return persistedProtectedDocument;\n\n\t\treturn new JSONLDParser()\n\t\t\t.parse( response.data )\n\t\t\t.then<T>( ( expandedResult:object[] ) => {\n\t\t\t\tconst freeNodes:RDFNode[] = RDFNode.getFreeNodes( expandedResult );\n\t\t\t\tthis._applyNodeMap( freeNodes );\n\n\t\t\t\tconst preferenceHeader:Header = response.getHeader( \"Preference-Applied\" );\n\t\t\t\tif( preferenceHeader === null || preferenceHeader.toString() !== \"return=representation\" ) return persistedProtectedDocument;\n\n\t\t\t\tconst rdfDocuments:RDFDocument[] = RDFDocument.getDocuments( expandedResult );\n\t\t\t\treturn this._updateFromPreferenceApplied<T>( persistedProtectedDocument, rdfDocuments, response );\n\t\t\t} );\n\t}\n\n\tprivate _applyNodeMap( freeNodes:RDFNode[] ):void {\n\t\tif( ! freeNodes.length ) return;\n\t\tconst freeResources:FreeResources = this._getFreeResources( freeNodes );\n\t\tconst responseMetadata:ResponseMetadata = <ResponseMetadata> freeResources.getResources().find( ResponseMetadata.is );\n\n\t\tfor( const documentMetadata of responseMetadata.documentsMetadata ) {\n\t\t\tconst document:Document = documentMetadata.relatedDocument as Document;\n\t\t\tfor( const { entryKey, entryValue } of documentMetadata.bNodesMap.entries ) {\n\t\t\t\tconst originalBNode:BlankNode = document.getFragment( entryKey.id );\n\t\t\t\toriginalBNode.id = entryValue.id;\n\n\t\t\t\tdocument._fragmentsIndex.delete( entryKey.id );\n\t\t\t\tdocument._fragmentsIndex.set( entryValue.id, originalBNode );\n\t\t\t}\n\t\t\tdocument._syncSavedFragments();\n\t\t}\n\t}\n\n\tprivate _applyAccessPointsMetadatas( accessPointsMetadatas:AccessPointsMetadata[] ):void {\n\t\tif( ! accessPointsMetadatas.length ) return;\n\n\t\tconst getResourcesData:( resourceURI:string ) => MembershipResourceData = this\n\t\t\t._createMembershipResourceDataGetter();\n\n\t\taccessPointsMetadatas.forEach( metadata => {\n\t\t\tconst relationURIs:string[] = Object.keys( metadata );\n\n\t\t\trelationURIs.forEach( relationURI => {\n\t\t\t\tconst pointers:Pointer[] = Array.isArray( metadata[ relationURI ] ) ?\n\t\t\t\t\tmetadata[ relationURI ] : [ metadata[ relationURI ] ];\n\n\t\t\t\tconst compactRelation:( schema:DigestedObjectSchema, uris:Map<string, string> ) => string = ( schema, uris ) => {\n\t\t\t\t\tif( uris.has( relationURI ) ) return uris.get( relationURI );\n\t\t\t\t\tif( schema.vocab ) return URI.getRelativeURI( relationURI, schema.vocab );\n\n\t\t\t\t\treturn relationURI;\n\t\t\t\t};\n\n\t\t\t\tpointers.forEach( pointer => {\n\t\t\t\t\tconst resourceURI:string = pointer.id\n\t\t\t\t\t\t.split( \"/\" )\n\t\t\t\t\t\t.slice( 0, - 2 )\n\t\t\t\t\t\t.concat( \"\" )\n\t\t\t\t\t\t.join( \"/\" );\n\n\t\t\t\t\tconst { resource, schema, uris } = getResourcesData( resourceURI );\n\t\t\t\t\tconst relationName:string = compactRelation( schema, uris );\n\n\t\t\t\t\tconst accessPoint:AccessPoint = ProtectedDocument\n\t\t\t\t\t\t.decorate( pointer, this );\n\n\t\t\t\t\tObject.defineProperty( resource, \"$\" + relationName, {\n\t\t\t\t\t\tenumerable: false,\n\t\t\t\t\t\tconfigurable: true,\n\t\t\t\t\t\tvalue: accessPoint,\n\t\t\t\t\t} );\n\t\t\t\t} );\n\t\t\t} );\n\t\t} );\n\t}\n\n\tprivate _createMembershipResourceGetter():( resourceURI:string ) => Document {\n\t\tconst resources:Map<string, Document> = new Map();\n\t\treturn resourceURI => {\n\t\t\tif( resources.has( resourceURI ) ) return resources.get( resourceURI );\n\t\t\tconst resource:Document = this.register( resourceURI );\n\n\t\t\t// Delete existing access points\n\t\t\tObject\n\t\t\t\t.getOwnPropertyNames( resource )\n\t\t\t\t.filter( key => key.startsWith( \"$\" ) )\n\t\t\t\t.filter( key => ! resource.propertyIsEnumerable( key ) )\n\t\t\t\t.forEach( key => delete resource[ key ] )\n\t\t\t;\n\n\t\t\tresources.set( resourceURI, resource );\n\t\t\treturn resource;\n\t\t};\n\t}\n\n\tprivate _createMembershipResourceDataGetter():( resourceURI:string ) => MembershipResourceData {\n\t\tconst getResource:( resourceURI:string ) => Document = this\n\t\t\t._createMembershipResourceGetter();\n\n\t\tconst resourcesData:Map<string, MembershipResourceData> = new Map();\n\t\treturn resourceURI => {\n\t\t\tif( resourcesData.has( resourceURI ) ) return resourcesData.get( resourceURI );\n\t\t\tconst resource:Document = getResource( resourceURI );\n\n\t\t\tconst schema:DigestedObjectSchema = this._getDigestedObjectSchema( resource.types, resource.id );\n\t\t\tif( resource.isPartial() ) ObjectSchemaDigester._combineSchemas( [ schema, resource._partialMetadata.schema ] );\n\n\t\t\tconst uris:Map<string, string> = JSONLDConverter.getPropertyURINameMap( schema );\n\n\t\t\tconst resourceData:MembershipResourceData = {\n\t\t\t\tresource,\n\t\t\t\tschema,\n\t\t\t\turis,\n\t\t\t};\n\n\t\t\tresourcesData.set( resourceURI, resourceData );\n\t\t\treturn resourceData;\n\t\t};\n\t}\n\n\tprivate _sendRequest( method:HTTPMethod, uri:string, options:RequestOptions, body?:string | Blob | Buffer ):Promise<Response>;\n\tprivate _sendRequest<T extends object>( method:HTTPMethod, uri:string, options:RequestOptions, body?:string | Blob | Buffer, parser?:Parser<T> ):Promise<[ T, Response ]>;\n\tprivate _sendRequest( method:HTTPMethod, uri:string, options:RequestOptions, body?:string | Blob | Buffer, parser?:Parser<any> ):any {\n\t\treturn RequestService.send( method, uri, body || null, options, parser )\n\t\t\t.catch( this._parseErrorResponse.bind( this ) );\n\t}\n}\n\n\ntype MembershipResourceData = { resource:Resource, schema:DigestedObjectSchema, uris:Map<string, string> };\n\nconst emptyQueryBuildFn:( queryBuilder:QueryDocumentsBuilder ) => QueryDocumentsBuilder = _ => _;\n"]}