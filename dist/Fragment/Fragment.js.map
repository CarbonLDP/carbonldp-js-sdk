{"version":3,"sources":["Fragment/Fragment.ts"],"names":[],"mappings":";;AAIA,0DAAyD;AAIzD,uEAAsE;AAOtE,yDAAwD;AAkD3C,QAAA,QAAQ,GAAmB;IACvC,SAAS,EAAE;QACV,IAAI,WAAW;YACd,OAAO,IAAI,CAAC,SAAS,CAAC;QACvB,CAAC;QACD,IAAI,WAAW,CAAiB,QAAiB;YAChD,IAAI,CAAC,SAAS,GAAG,QAAQ,CAAC;QAC3B,CAAC;QAED,IAAI,SAAS;YACZ,OAAO,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC;QACjC,CAAC;QACD,IAAI,SAAS,CAAiB,MAAc,IAAI,CAAC;KACjD;IAGD,WAAW,EAAX,UAAa,MAAa;QACzB,OAAO,+BAAc;aACnB,iBAAiB,CAAE,gBAAQ,CAAC,SAAS,EAAE,MAAM,CAAE,CAC/C;IACH,CAAC;IAED,QAAQ,EAAR,UAA4C,MAAQ;QACnD,IAAI,gBAAQ,CAAC,WAAW,CAAE,MAAM,CAAE;YAAG,OAAO,MAAM,CAAC;QAGnD,IAAM,MAAM,GAAW,MAAM,CAAC,MAAM,CAAE,MAAM,EAAE;YAC7C,SAAS,EAAE,MAAM,CAAC,SAAS;YAC3B,WAAW,EAAE,MAAM,CAAC,SAAS;SAC7B,CAAE,CAAC;QAEJ,IAAM,MAAM,GAAkD,+BAAc;aAC1E,gBAAgB,CAAE,MAAM,EAAE,qCAAiB,EAAE,mCAAgB,CAAE,CAAC;QAElE,OAAO,+BAAc;aACnB,oBAAoB,CAAE,gBAAQ,CAAC,SAAS,EAAE,MAAM,CAAE,CAAC;IACtD,CAAC;IAED,MAAM,EAAE,qCAAiB,CAAC,MAAM;IAChC,UAAU,EAAE,qCAAiB,CAAC,UAAU;CACxC,CAAC","file":"Fragment.js","sourcesContent":["import { Document } from \"../Document/Document\";\n\nimport { GETOptions, RequestOptions } from \"../HTTP/Request\";\n\nimport { ModelDecorator } from \"../Model/ModelDecorator\";\nimport { ModelFactory } from \"../Model/ModelFactory\";\nimport { ModelPrototype } from \"../Model/ModelPrototype\";\n\nimport { QueryablePointer } from \"../QueryDocuments/QueryablePointer\";\nimport { QueryDocumentBuilder } from \"../QueryDocuments/QueryDocumentBuilder\";\n\nimport { BaseResolvablePointer } from \"../Repository/BaseResolvablePointer\";\n\nimport { BaseResolvableFragment } from \"./BaseResolvableFragment\";\nimport { BaseTransientFragment } from \"./BaseTransientFragment\";\nimport { TransientFragment } from \"./TransientFragment\";\n\n\nexport interface Fragment extends TransientFragment, QueryablePointer {\n\t$document:Document;\n\t$registry:Document;\n\t$repository:Document;\n\n\n\tget<T extends object>( queryBuilderFn:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & Document>;\n\tget<T extends object>( requestOptions?:GETOptions, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & Document>;\n\tget<T extends object>( uri:string, queryBuilderFn:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & Document>;\n\tget<T extends object>( uri:string, requestOptions?:GETOptions, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & Document>;\n\n\tresolve<T extends object>( requestOptions?:GETOptions, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & this & Document>;\n\tresolve<T extends object>( queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & this & Document>;\n\tresolve<T extends object>( document:Document, queryBuilderFn:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & Document>;\n\tresolve<T extends object>( document:Document, requestOptions?:GETOptions, queryBuilderFn?:( queryBuilder:QueryDocumentBuilder ) => QueryDocumentBuilder ):Promise<T & Document>;\n\n\n\texists( requestOptions?:RequestOptions ):Promise<boolean>;\n\texists( uri:string, requestOptions?:RequestOptions ):Promise<boolean>;\n\n\n\trefresh<T extends object>( requestOptions?:RequestOptions ):Promise<T & this & Document>;\n\trefresh<T extends object>( document:Document, requestOptions?:RequestOptions ):Promise<T & Document>;\n\n\tsave<T extends object>( requestOptions?:RequestOptions ):Promise<T & this & Document>;\n\tsave<T extends object>( document:Document, requestOptions?:RequestOptions ):Promise<T & Document>;\n\n\tsaveAndRefresh<T extends object>( requestOptions?:RequestOptions ):Promise<T & this & Document>;\n\tsaveAndRefresh<T extends object>( document:Document, requestOptions?:RequestOptions ):Promise<T & Document>;\n\n\n\tdelete( requestOptions?:RequestOptions ):Promise<void>;\n\tdelete( uri:string, requestOptions?:RequestOptions ):Promise<void>;\n}\n\n\nexport type OverriddenMembers =\n\t| \"$repository\"\n\t| \"_resolved\"\n\t;\n\nexport type FragmentFactory =\n\t& ModelPrototype<Fragment, TransientFragment & QueryablePointer, OverriddenMembers>\n\t& ModelDecorator<Fragment, BaseResolvableFragment>\n\t& ModelFactory<TransientFragment, BaseTransientFragment>\n\t;\n\nexport const Fragment:FragmentFactory = {\n\tPROTOTYPE: {\n\t\tget $repository( this:Fragment ):Document {\n\t\t\treturn this.$registry;\n\t\t},\n\t\tset $repository( this:Fragment, document:Document ) {\n\t\t\tthis.$registry = document;\n\t\t},\n\n\t\tget _resolved( this:Fragment ):boolean {\n\t\t\treturn this.$document._resolved;\n\t\t},\n\t\tset _resolved( this:Fragment, _value:boolean ) {},\n\t},\n\n\n\tisDecorated( object:object ):object is Fragment {\n\t\treturn ModelDecorator\n\t\t\t.hasPropertiesFrom( Fragment.PROTOTYPE, object )\n\t\t\t;\n\t},\n\n\tdecorate<T extends BaseResolvableFragment>( object:T ):T & Fragment {\n\t\tif( Fragment.isDecorated( object ) ) return object;\n\n\t\ttype ForcedT = T & { $document:Document } & BaseResolvablePointer;\n\t\tconst forced:ForcedT = Object.assign( object, {\n\t\t\t$document: object.$registry,\n\t\t\t$repository: object.$registry,\n\t\t} );\n\n\t\tconst target:ForcedT & TransientFragment & QueryablePointer = ModelDecorator\n\t\t\t.decorateMultiple( forced, TransientFragment, QueryablePointer );\n\n\t\treturn ModelDecorator\n\t\t\t.definePropertiesFrom( Fragment.PROTOTYPE, target );\n\t},\n\n\tcreate: TransientFragment.create,\n\tcreateFrom: TransientFragment.createFrom,\n};\n"]}