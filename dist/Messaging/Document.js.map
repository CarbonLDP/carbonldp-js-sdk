{"version":3,"sources":["Messaging/Document.ts"],"names":[],"mappings":"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","file":"Document.js","sourcesContent":["import { ModelDecorator } from \"../core/ModelDecorator\";\nimport { ServiceAwareDocument } from \"../ServiceAwareDocument\";\nimport {\n\thasFunction,\n\tisObject,\n} from \"../Utils\";\nimport { AccessPointCreated } from \"./AccessPointCreated\";\nimport { ChildCreated } from \"./ChildCreated\";\nimport { DocumentCreated } from \"./DocumentCreated\";\nimport { DocumentDeleted } from \"./DocumentDeleted\";\nimport { DocumentModified } from \"./DocumentModified\";\nimport { Event } from \"./Event\";\nimport { EventMessage } from \"./EventMessage\";\nimport { MemberAdded } from \"./MemberAdded\";\nimport { MemberRemoved } from \"./MemberRemoved\";\n\nexport interface MessagingDocument extends ServiceAwareDocument {\n\ton( event:Event.CHILD_CREATED, onEvent:( message:ChildCreated ) => void, onError:( error:Error ) => void ):void;\n\n\ton( event:Event.ACCESS_POINT_CREATED, onEvent:( message:AccessPointCreated ) => void, onError:( error:Error ) => void ):void;\n\n\ton( event:Event.DOCUMENT_CREATED, onEvent:( message:DocumentCreated ) => void, onError:( error:Error ) => void ):void;\n\n\ton( event:Event.DOCUMENT_MODIFIED, onEvent:( message:DocumentModified ) => void, onError:( error:Error ) => void ):void;\n\n\ton( event:Event.DOCUMENT_DELETED, onEvent:( message:DocumentDeleted ) => void, onError:( error:Error ) => void ):void;\n\n\ton( event:Event.MEMBER_ADDED, onEvent:( message:MemberAdded ) => void, onError:( error:Error ) => void ):void;\n\n\ton( event:Event.MEMBER_REMOVED, onEvent:( message:MemberRemoved ) => void, onError:( error:Error ) => void ):void;\n\n\ton( event:Event | string, onEvent:( message:EventMessage ) => void, onError:( error:Error ) => void ):void;\n\n\n\toff( event:Event.CHILD_CREATED, onEvent:( message:ChildCreated ) => void, onError:( error:Error ) => void ):void;\n\n\toff( event:Event.ACCESS_POINT_CREATED, onEvent:( message:AccessPointCreated ) => void, onError:( error:Error ) => void ):void;\n\n\toff( event:Event.DOCUMENT_CREATED, onEvent:( message:DocumentCreated ) => void, onError:( error:Error ) => void ):void;\n\n\toff( event:Event.DOCUMENT_MODIFIED, onEvent:( message:DocumentModified ) => void, onError:( error:Error ) => void ):void;\n\n\toff( event:Event.DOCUMENT_DELETED, onEvent:( message:DocumentDeleted ) => void, onError:( error:Error ) => void ):void;\n\n\toff( event:Event.MEMBER_ADDED, onEvent:( message:MemberAdded ) => void, onError:( error:Error ) => void ):void;\n\n\toff( event:Event.MEMBER_REMOVED, onEvent:( message:MemberRemoved ) => void, onError:( error:Error ) => void ):void;\n\n\toff( event:Event | string, onEvent:( message:EventMessage ) => void, onError:( error:Error ) => void ):void;\n\n\n\tone( event:Event.CHILD_CREATED, onEvent:( message:ChildCreated ) => void, onError:( error:Error ) => void ):void;\n\n\tone( event:Event.ACCESS_POINT_CREATED, onEvent:( message:AccessPointCreated ) => void, onError:( error:Error ) => void ):void;\n\n\tone( event:Event.DOCUMENT_CREATED, onEvent:( message:DocumentCreated ) => void, onError:( error:Error ) => void ):void;\n\n\tone( event:Event.DOCUMENT_MODIFIED, onEvent:( message:DocumentModified ) => void, onError:( error:Error ) => void ):void;\n\n\tone( event:Event.DOCUMENT_DELETED, onEvent:( message:DocumentDeleted ) => void, onError:( error:Error ) => void ):void;\n\n\tone( event:Event.MEMBER_ADDED, onEvent:( message:MemberAdded ) => void, onError:( error:Error ) => void ):void;\n\n\tone( event:Event.MEMBER_REMOVED, onEvent:( message:MemberRemoved ) => void, onError:( error:Error ) => void ):void;\n\n\tone( event:Event | string, onEvent:( message:EventMessage ) => void, onError:( error:Error ) => void ):void;\n\n\n\tonAccessPointCreated( onEvent:( message:AccessPointCreated ) => void, onError:( error:Error ) => void ):void;\n\n\tonChildCreated( onEvent:( message:ChildCreated ) => void, onError:( error:Error ) => void ):void;\n\n\tonDocumentCreated( onEvent:( message:DocumentCreated ) => void, onError:( error:Error ) => void ):void;\n\n\tonDocumentModified( onEvent:( message:DocumentModified ) => void, onError:( error:Error ) => void ):void;\n\n\tonDocumentDeleted( onEvent:( message:DocumentDeleted ) => void, onError:( error:Error ) => void ):void;\n\n\tonMemberAdded( onEvent:( message:MemberAdded ) => void, onError:( error:Error ) => void ):void;\n\n\tonMemberRemoved( onEvent:( message:MemberRemoved ) => void, onError:( error:Error ) => void ):void;\n}\n\n\nfunction on<T extends EventMessage>( this:MessagingDocument, event:Event | string, onEvent:( message:T ) => void, onError:( error:Error ) => void ):void {\n\treturn this._documents.on( event, this.id, onEvent, onError );\n}\n\nfunction off<T extends EventMessage>( this:MessagingDocument, event:Event | string, onEvent:( message:T ) => void, onError:( error:Error ) => void ):void {\n\treturn this._documents.off( event, this.id, onEvent, onError );\n}\n\nfunction one<T extends EventMessage>( this:MessagingDocument, event:Event | string, onEvent:( message:T ) => void, onError:( error:Error ) => void ):void {\n\treturn this._documents.one( event, this.id, onEvent, onError );\n}\n\nfunction onAccessPointCreated( this:MessagingDocument, onEvent:( message:AccessPointCreated ) => void, onError:( error:Error ) => void ):void {\n\treturn this._documents.onAccessPointCreated( this.id, onEvent, onError );\n}\n\nfunction onChildCreated( this:MessagingDocument, onEvent:( message:ChildCreated ) => void, onError:( error:Error ) => void ):void {\n\treturn this._documents.onChildCreated( this.id, onEvent, onError );\n}\n\nfunction onDocumentCreated( this:MessagingDocument, onEvent:( message:DocumentCreated ) => void, onError:( error:Error ) => void ):void {\n\treturn this._documents.onDocumentCreated( this.id, onEvent, onError );\n}\n\nfunction onDocumentModified( this:MessagingDocument, onEvent:( message:DocumentModified ) => void, onError:( error:Error ) => void ):void {\n\treturn this._documents.onDocumentModified( this.id, onEvent, onError );\n}\n\nfunction onDocumentDeleted( this:MessagingDocument, onEvent:( message:DocumentDeleted ) => void, onError:( error:Error ) => void ):void {\n\treturn this._documents.onDocumentDeleted( this.id, onEvent, onError );\n}\n\nfunction onMemberAdded( this:MessagingDocument, onEvent:( message:MemberAdded ) => void, onError:( error:Error ) => void ):void {\n\treturn this._documents.onMemberAdded( this.id, onEvent, onError );\n}\n\nfunction onMemberRemoved( this:MessagingDocument, onEvent:( message:MemberRemoved ) => void, onError:( error:Error ) => void ):void {\n\treturn this._documents.onMemberRemoved( this.id, onEvent, onError );\n}\n\nexport interface MessagingDocumentFactory extends ModelDecorator<MessagingDocument, ServiceAwareDocument> {\n\tisDecorated( object:object ):object is MessagingDocument;\n\n\tdecorate<T extends ServiceAwareDocument>( object:T ):T & MessagingDocument;\n}\n\nexport const MessagingDocument:MessagingDocumentFactory = {\n\n\tisDecorated( object:object ):object is MessagingDocument {\n\t\treturn isObject( object )\n\t\t\t&& hasFunction( object, \"on\" )\n\t\t\t&& hasFunction( object, \"off\" )\n\t\t\t&& hasFunction( object, \"one\" )\n\t\t\t&& hasFunction( object, \"onDocumentCreated\" )\n\t\t\t&& hasFunction( object, \"onChildCreated\" )\n\t\t\t&& hasFunction( object, \"onAccessPointCreated\" )\n\t\t\t&& hasFunction( object, \"onDocumentModified\" )\n\t\t\t&& hasFunction( object, \"onDocumentDeleted\" )\n\t\t\t&& hasFunction( object, \"onMemberAdded\" )\n\t\t\t&& hasFunction( object, \"onMemberRemoved\" )\n\t\t\t;\n\t},\n\n\tdecorate<T extends ServiceAwareDocument>( object:T ):T & MessagingDocument {\n\t\tif( MessagingDocument.isDecorated( object ) ) return object;\n\n\t\treturn Object.defineProperties( object, {\n\t\t\t\"on\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: on,\n\t\t\t},\n\t\t\t\"off\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: off,\n\t\t\t},\n\t\t\t\"one\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: one,\n\t\t\t},\n\t\t\t\"onDocumentCreated\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: onDocumentCreated,\n\t\t\t},\n\t\t\t\"onChildCreated\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: onChildCreated,\n\t\t\t},\n\t\t\t\"onAccessPointCreated\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: onAccessPointCreated,\n\t\t\t},\n\t\t\t\"onDocumentModified\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: onDocumentModified,\n\t\t\t},\n\t\t\t\"onDocumentDeleted\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: onDocumentDeleted,\n\t\t\t},\n\t\t\t\"onMemberAdded\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: onMemberAdded,\n\t\t\t},\n\t\t\t\"onMemberRemoved\": {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: onMemberRemoved,\n\t\t\t},\n\t\t} );\n\t},\n\n};\n"]}